{"version":3,"file":"VehicleAnimation-1bdd77c6.js","sources":["../../node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js","../../src/plugins/vehicle-animation/LegendColors.tsx","../../src/components/PlaybackControls.vue","../../src/plugins/vehicle-animation/SettingsPanel.vue","../../src/plugins/vehicle-animation/DrtRequestLayer.tsx","../../src/layers/moving-icons/moving-icons-layer.ts","../../src/layers/PathTraceLayer.ts","../../src/plugins/vehicle-animation/TripViz.tsx","../../src/plugins/vehicle-animation/VehicleAnimation.vue"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { projectPosition } from '../../shaderlib/project/project-functions';\nimport { COORDINATE_SYSTEM } from '../../lib/constants';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_ATTENUATION = [0, 0, 1];\nconst DEFAULT_LIGHT_POSITION = [0.0, 0.0, 1.0];\nlet idCount = 0;\nexport class PointLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'point');\n\n    _defineProperty(this, \"position\", void 0);\n\n    _defineProperty(this, \"attenuation\", void 0);\n\n    _defineProperty(this, \"projectedLight\", void 0);\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      position = DEFAULT_LIGHT_POSITION\n    } = props;\n    this.id = props.id || \"point-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'point';\n    this.position = position;\n    this.attenuation = getAttenuation(props);\n    this.projectedLight = { ...this\n    };\n  }\n\n  getProjectedLight({\n    layer\n  }) {\n    const {\n      projectedLight\n    } = this;\n    const viewport = layer.context.viewport;\n    const {\n      coordinateSystem,\n      coordinateOrigin\n    } = layer.props;\n    const position = projectPosition(this.position, {\n      viewport,\n      coordinateSystem,\n      coordinateOrigin,\n      fromCoordinateSystem: viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN,\n      fromCoordinateOrigin: [0, 0, 0]\n    });\n    projectedLight.color = this.color;\n    projectedLight.intensity = this.intensity;\n    projectedLight.position = position;\n    return projectedLight;\n  }\n\n}\n\nfunction getAttenuation(props) {\n  if (props.attenuation) {\n    return props.attenuation;\n  }\n\n  if ('intensity' in props) {\n    return [0, 0, props.intensity || 0];\n  }\n\n  return DEFAULT_ATTENUATION;\n}\n//# sourceMappingURL=point-light.js.map","import { LegendItem } from '@/Globals'\nimport React from 'react'\n\nexport default function Component(props: {\n  title: string\n  description?: string\n  values: number[]\n  items: LegendItem[]\n}) {\n  const listItems = props.items.map(item => (\n    <li key={item.value + item.value[0]} style={{ display: 'flex' }}>\n      {item.label && (\n        <div\n          style={{\n            margin: '0 0.5rem 0.0rem 0',\n            fontWeight: 'bold',\n          }}\n        >\n          {item.label}\n        </div>\n      )}\n      <div\n        style={{\n          width: '100%',\n          height: `3px`,\n          marginTop: '0.5rem',\n          backgroundColor: `rgb(${item.color})`,\n        }}\n      ></div>\n    </li>\n  ))\n\n  return (\n    <div>\n      <h4\n        style={{\n          textAlign: 'left',\n          fontWeight: 'bold',\n          margin: '1rem 0 0.25rem 0',\n          fontSize: '0.8rem',\n        }}\n      >\n        {props.title}\n      </h4>\n      <p>{props.description}</p>\n      <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>{listItems}</ul>\n    </div>\n  )\n}\n","<template lang=\"pug\">\n.slider-thingy\n  b-slider.slider(\n    v-model=\"sliderValue\"\n    v-bind=\"sliderOptions\"\n    size=\"is-large\"\n    @dragging=\"dragging\"\n    @dragstart=\"dragStart\"\n    @dragend=\"dragEnd\")\n\n  .buttons\n    .playpause(@click='toggleSimulation')\n      i.button-icon.fa.fa-1x.fa-pause(v-if=\"isRunning\")\n      i.button-icon.fa.fa-1x.fa-play(v-else)\n\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport * as timeConvert from 'convert-seconds'\n\nexport default defineComponent({\n  name: 'PlaybackControls',\n  props: {\n    isRunning: { type: Boolean, required: true },\n    timeStart: { type: Number, required: true },\n    timeEnd: { type: Number, required: true },\n    currentTime: { type: Number, required: true },\n  },\n  data: () => {\n    return {\n      pauseWhileDragging: false,\n      sliderValue: 0,\n      sliderOptions: {\n        min: 0,\n        max: 1000000,\n        clickable: false,\n        duration: 0,\n        lazy: true,\n        tooltip: true,\n        'tooltip-placement': 'top',\n      } as any,\n    }\n  },\n  mounted() {\n    this.sliderOptions['custom-formatter'] = (v: number) => {\n      return this.convertSecondsToClockTimeMinutes(v)\n    }\n    window.addEventListener('keyup', this.onKeyPressed)\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('keyup', this.onKeyPressed)\n  },\n  watch: {\n    currentTime() {\n      this.sliderValue =\n        (1000000.0 * (this.currentTime - this.timeStart)) / (this.timeEnd - this.timeStart)\n    },\n  },\n\n  methods: {\n    toggleSimulation() {\n      this.$emit('click')\n    },\n\n    convertSecondsToClockTimeMinutes(index: number) {\n      const seconds = this.getSecondsFromSlider(index)\n\n      try {\n        const hms = timeConvert(seconds)\n        const minutes = ('00' + hms.minutes).slice(-2)\n        return `${hms.hours}:${minutes}`\n      } catch (e) {\n        return '00:00'\n      }\n    },\n\n    dragStart() {\n      if (this.isRunning) {\n        this.pauseWhileDragging = true\n        this.$emit('click')\n      }\n    },\n\n    dragEnd() {\n      if (this.pauseWhileDragging) this.$emit('click')\n      this.pauseWhileDragging = false\n    },\n\n    dragging(value: number) {\n      this.$emit('time', this.getSecondsFromSlider(value))\n    },\n\n    onKeyPressed(ev: KeyboardEvent) {\n      if (ev.code === 'Space') this.toggleSimulation()\n    },\n\n    getSecondsFromSlider(value: number) {\n      let seconds = ((this.timeEnd - this.timeStart) * value) / 1000000.0\n      if (seconds === this.timeEnd) seconds = this.timeEnd - 1\n      return seconds\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles.scss';\n\n.slider-thingy {\n  display: flex;\n  flex-direction: row;\n  z-index: 1;\n}\n\n.slider {\n  margin: auto 0;\n  flex: 1;\n  font-weight: bold;\n}\n\n.buttons {\n  margin: 0 0 0 2rem;\n}\n\n.playpause {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 50%;\n  color: white;\n  background-color: $themeColor;\n  display: flex;\n  text-align: center;\n  // box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.25);\n  cursor: pointer;\n  pointer-events: auto;\n}\n\n.playpause:hover {\n  background-color: #39a8f1;\n  border: 2px solid white;\n}\n\n.button-icon {\n  margin: auto auto;\n}\n\n@media only screen and (max-width: 640px) {\n  .slider-thingy {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .slider {\n    flex: 1;\n    margin: auto 0rem;\n  }\n\n  .buttons {\n    margin: 0.25rem 0 0 2rem;\n  }\n}\n</style>\n","<template lang=\"pug\">\n.settings-panel-content\n  h4 {{ $t('showhide')}}\n\n  .row(:key=\"label\" v-for=\"label in Object.keys(items)\")\n    toggle-button.toggle(\n      :width=\"40\"\n      :value=\"items[label]\"\n      :labels=\"false\"\n      :color=\"{checked: '#4b7cc4', unchecked: '#222'}\"\n      @change=\"$emit('click',label)\")\n    label(v-html=\"$t(label)\")\n\n</template>\n\n<script lang=\"ts\">\nconst i18n = {\n  messages: {\n    en: {\n      requests: 'DRT&nbsp;Requests',\n      passengers: 'Passengers',\n      search: 'Search',\n      showhide: 'Show/Hide',\n      vehicles: 'DRT Vehicles',\n      routes: 'Routes',\n      speed: 'Speed',\n      backgroundTraffic: 'All Traffic',\n    },\n    de: {\n      requests: 'DRT&nbsp;Anfragen',\n      passengers: 'Passagiere',\n      search: 'Suche',\n      showhide: 'Ein-/Ausblenden',\n      vehicles: 'DRT Fahrzeuge',\n      routes: 'Routen',\n      speed: 'Geschwindigkeit',\n      backgroundTraffic: 'Alle Fahrzeuge',\n    },\n  },\n}\n\nimport { defineComponent } from 'vue'\nimport { ToggleButton } from 'vue-js-toggle-button'\n\nexport default defineComponent({\n  name: 'XmasSettingsPanel',\n  i18n,\n  components: { ToggleButton },\n  props: {\n    items: { type: Object, required: true },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\">\n.settings-panel-content {\n  margin: 2rem 0.25rem 0 0.25rem;\n}\n\nh4 {\n  font-weight: bold;\n  font-size: 0.8rem;\n  margin-bottom: 0.5rem;\n}\n\n.row {\n  display: 'grid';\n  grid-template-columns: 'auto 1fr';\n}\n\nlabel {\n  margin: auto 0 auto 0rem;\n  text-align: 'left';\n}\n\n.toggle {\n  margin-bottom: 0.25rem;\n  margin-right: 0.5rem;\n}\n</style>\n","import { ArcLayer } from '@deck.gl/layers'\n\nconst defaultProps = {\n  currentTime: { type: 'number', value: 0, min: 0 },\n  getTimeStart: { type: 'accessor', value: null },\n  getTimeEnd: { type: 'accessor', value: null },\n  searchFlag: { type: 'number', value: 0 },\n}\n\nexport default class DrtRequestArcLayer extends ArcLayer {\n  getShaders() {\n    const shaders = super.getShaders()\n    shaders.inject = {\n      // Timestamp of the vertex\n      'vs:#decl': `\\\n        attribute float timeStart;\n        attribute float timeEnd;\n        uniform float currentTime;\n        uniform float searchFlag;\n        varying float vTime;\n      `,\n      'vs:#main-start': `\\\n        if (searchFlag == 1.0) {\n          vTime = 999.0;\n        } else if (timeEnd == -1.0 || timeStart > currentTime || timeEnd < currentTime ) {\n          vTime = -1.0;\n          return;\n        } else {\n          float nearBeginning = currentTime - timeStart;\n          float nearEnd = timeEnd - currentTime;\n          vTime = min(nearBeginning, nearEnd);\n        }\n      `,\n      'fs:#decl': `\\\n        uniform float currentTime;\n        uniform float searchFlag;\n        varying float vTime;\n      `,\n      'fs:#main-start': `\\\n      if (searchFlag == 0.0 && vTime == -1.0 ) discard;\n      `,\n      // fade the traces in and out\n      'fs:DECKGL_FILTER_COLOR': `\\\n        if (vTime <= 10.0) color.a *= (vTime / 10.0);\n      `,\n    }\n    return shaders\n  }\n\n  initializeState(params: any) {\n    super.initializeState(params)\n\n    const attributeManager = this.getAttributeManager()\n    attributeManager.addInstanced({\n      timeStart: { size: 1, accessor: 'getTimeStart' },\n      timeEnd: { size: 1, accessor: 'getTimeEnd' },\n    })\n  }\n\n  draw(params: any) {\n    const { currentTime } = this.props\n\n    params.uniforms = Object.assign({}, params.uniforms, {\n      currentTime,\n    })\n\n    super.draw(params)\n  }\n}\n\nDrtRequestArcLayer.layerName = 'DrtRequestArcLayer'\nDrtRequestArcLayer.defaultProps = defaultProps\n","// BC 2021-04-30: this file forked from https://github.com/visgl/deck.gl\n//\n// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport { Layer, project32, picking, log } from '@deck.gl/core'\nimport GL from '@luma.gl/constants'\nimport { Model, Geometry } from '@luma.gl/core'\n\nimport vertShader from './icon-layer.glsl.vert?raw'\nimport fragShader from './icon-layer.glsl.frag?raw'\n\nimport IconManager from './icon-manager'\n\nconst DEFAULT_COLOR = [0, 0, 0, 255]\n\nconst defaultProps = {\n  iconAtlas: { type: 'image', value: null, async: true },\n  iconMapping: { type: 'object', value: {}, async: true },\n  sizeScale: { type: 'number', value: 1, min: 0 },\n  billboard: false,\n  sizeUnits: 'pixels',\n  sizeMinPixels: { type: 'number', min: 0, value: 0 }, //  min point radius in pixels\n  sizeMaxPixels: { type: 'number', min: 0, value: Number.MAX_SAFE_INTEGER }, // max point radius in pixels\n  alphaCutoff: { type: 'number', value: 0.05, min: 0, max: 1 },\n  iconStill: { type: 'object', value: null },\n\n  getIcon: { type: 'accessor', value: (x: any) => x.icon },\n  getColor: { type: 'accessor', value: DEFAULT_COLOR },\n  getSize: { type: 'accessor', value: 1 },\n  getAngle: { type: 'accessor', value: 0 },\n  getPixelOffset: { type: 'accessor', value: [0, 0] },\n\n  getPathStart: { type: 'accessor', value: null },\n  getPathEnd: { type: 'accessor', value: null },\n  getTimeStart: { type: 'accessor', value: null },\n  getTimeEnd: { type: 'accessor', value: null },\n  currentTime: { type: 'number', value: 0 },\n\n  pickable: { type: 'boolean', value: true },\n  onIconError: { type: 'function', value: null, compare: false, optional: true },\n}\n\nexport default class IconLayer extends Layer {\n  getShaders() {\n    return super.getShaders({ vs: vertShader, fs: fragShader, modules: [project32, picking] })\n  }\n\n  initializeState() {\n    this.state = {\n      iconManager: new IconManager(this.context.gl, {\n        onUpdate: this._onUpdate.bind(this),\n        onError: this._onError.bind(this) as any,\n      }),\n    }\n\n    const attributeManager = this.getAttributeManager()\n\n    /* eslint-disable max-len */\n    attributeManager.addInstanced({\n      instanceTimestamps: {\n        size: 1,\n        accessor: 'getTimeStart',\n      },\n      instanceTimestampsNext: {\n        size: 1,\n        accessor: 'getTimeEnd',\n      },\n      instanceStartPositions: {\n        size: 2,\n        accessor: 'getPathStart',\n      },\n      instanceEndPositions: {\n        size: 2,\n        accessor: 'getPathEnd',\n      },\n      instanceSizes: {\n        size: 1,\n        transition: true,\n        accessor: 'getSize',\n        defaultValue: 1,\n      },\n      instanceOffsets: { size: 2, accessor: 'getIcon', transform: this.getInstanceOffset },\n      instanceIconFrames: { size: 4, accessor: 'getIcon', transform: this.getInstanceIconFrame },\n      instanceColorModes: {\n        size: 1,\n        type: GL.UNSIGNED_BYTE,\n        accessor: 'getIcon',\n        transform: this.getInstanceColorMode,\n      },\n      instanceColors: {\n        size: this.props.colorFormat.length,\n        type: GL.UNSIGNED_BYTE,\n        normalized: true,\n        transition: true,\n        accessor: 'getColor',\n        defaultValue: DEFAULT_COLOR,\n      },\n      instanceAngles: {\n        size: 1,\n        transition: true,\n        accessor: 'getAngle',\n      },\n      instancePixelOffset: {\n        size: 2,\n        transition: true,\n        accessor: 'getPixelOffset',\n      },\n    })\n    /* eslint-enable max-len */\n  }\n\n  /* eslint-disable max-statements, complexity */\n  updateState({ oldProps, props, changeFlags }: any) {\n    super.updateState({ props, oldProps, changeFlags })\n\n    const attributeManager = this.getAttributeManager()\n    const { iconAtlas, iconMapping, data, getIcon } = props\n    const { iconManager } = this.state\n\n    iconManager.setProps({ loadOptions: props.loadOptions })\n\n    let iconMappingChanged = false\n    const prePacked = iconAtlas || this.internalState.isAsyncPropLoading('iconAtlas')\n\n    // prepacked iconAtlas from user\n    if (prePacked) {\n      if (oldProps.iconAtlas !== props.iconAtlas) {\n        iconManager.setProps({ iconAtlas, autoPacking: false })\n      }\n\n      if (oldProps.iconMapping !== props.iconMapping) {\n        iconManager.setProps({ iconMapping })\n        iconMappingChanged = true\n      }\n    } else {\n      // otherwise, use autoPacking\n      iconManager.setProps({ autoPacking: true })\n    }\n\n    // handle data changed\n    if (\n      changeFlags.dataChanged ||\n      (changeFlags.updateTriggersChanged &&\n        (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getIcon))\n    ) {\n      iconManager.setProps({ data, getIcon })\n    }\n\n    if (iconMappingChanged) {\n      attributeManager.invalidate('instanceOffsets')\n      attributeManager.invalidate('instanceIconFrames')\n      attributeManager.invalidate('instanceColorModes')\n    }\n\n    if (changeFlags.extensionsChanged) {\n      const { gl } = this.context\n      this.state.model?.delete()\n      this.state.model = this._getModel(gl)\n      attributeManager.invalidateAll()\n    }\n  }\n  /* eslint-enable max-statements, complexity */\n\n  get isLoaded() {\n    return super.isLoaded && this.state.iconManager.isLoaded\n  }\n\n  finalizeState() {\n    super.finalizeState()\n    // Release resources held by the icon manager\n    this.state.iconManager.finalize()\n  }\n\n  draw({ uniforms }: any) {\n    const {\n      sizeScale,\n      sizeMinPixels,\n      sizeMaxPixels,\n      sizeUnits,\n      billboard,\n      alphaCutoff,\n      currentTime,\n      iconStill,\n      pickable,\n    } = this.props\n\n    const { iconManager } = this.state\n    const { viewport } = this.context\n\n    const iconsTexture = iconManager.getTexture()\n    if (iconsTexture) {\n      this.state.model\n        .setUniforms(uniforms)\n        .setUniforms({\n          iconsTexture,\n          iconsTextureDim: [iconsTexture.width, iconsTexture.height],\n          sizeScale: sizeScale * (sizeUnits === 'pixels' ? viewport.metersPerPixel : 1),\n          sizeMinPixels,\n          sizeMaxPixels,\n          billboard,\n          alphaCutoff,\n          currentTime,\n          pickable,\n          iconStillOffsets: this.getInstanceOffset(iconStill),\n          iconStillFrames: this.getInstanceIconFrame(iconStill),\n        })\n        .draw()\n    }\n  }\n\n  _getModel(gl: any) {\n    // The icon-layer vertex shader uses 2d positions\n    // specifed via: attribute vec2 positions;\n    const positions = [-1, -1, -1, 1, 1, 1, 1, -1]\n\n    return new Model(gl, {\n      ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLE_FAN,\n        attributes: {\n          // The size must be explicitly passed here otherwise luma.gl\n          // will default to assuming that positions are 3D (x,y,z)\n          positions: {\n            size: 2,\n            value: new Float32Array(positions),\n          },\n        },\n      }),\n      isInstanced: true,\n    })\n  }\n\n  _onUpdate() {\n    this.setNeedsRedraw()\n  }\n\n  _onError(evt: any) {\n    const { onIconError } = this.getCurrentLayer().props\n    if (onIconError) {\n      onIconError(evt)\n    } else {\n      log.error(evt.error)()\n    }\n  }\n\n  getInstanceOffset(icon: any) {\n    const rect = this.state.iconManager.getIconMapping(icon)\n    return [rect.width / 2 - rect.anchorX || 0, rect.height / 2 - rect.anchorY || 0]\n  }\n\n  getInstanceColorMode(icon: any) {\n    const mapping = this.state.iconManager.getIconMapping(icon)\n    return mapping.mask ? 1 : 0\n  }\n\n  getInstanceIconFrame(icon: any) {\n    const rect = this.state.iconManager.getIconMapping(icon)\n    return [rect.x || 0, rect.y || 0, rect.width || 0, rect.height || 0]\n  }\n}\n\nIconLayer.layerName = 'FlatIconLayer'\nIconLayer.defaultProps = defaultProps\n","import { LineLayer } from '@deck.gl/layers'\n\nconst defaultProps = {\n  currentTime: { type: 'number', value: 0, min: 0 },\n  getTimeStart: { type: 'accessor', value: null },\n  getTimeEnd: { type: 'accessor', value: null },\n  searchFlag: { type: 'number', value: 0 },\n}\n\nexport default class PathTraceLayer extends LineLayer {\n  getShaders() {\n    const shaders = super.getShaders()\n    shaders.inject = {\n      // Timestamp of the vertex\n      'vs:#decl': `\\\n        attribute float timeStart;\n        attribute float timeEnd;\n        uniform float currentTime;\n        uniform float searchFlag;\n        varying float vTime;\n      `,\n      'vs:#main-start': `\\\n        if (searchFlag == 1.0) {\n          vTime = 999.0;\n        } else if(timeStart > currentTime || timeEnd < currentTime ) {\n          vTime = -1.0;\n          return;\n        } else {\n          float nearBeginning = currentTime - timeStart;\n          float nearEnd = timeEnd - currentTime;\n          vTime = min(nearBeginning, nearEnd);\n        }\n      `,\n      'fs:#decl': `\\\n        uniform float currentTime;\n        varying float vTime;\n        uniform float searchFlag;\n      `,\n      'fs:#main-start': `\\\n        if (searchFlag == 0.0 && vTime == -1.0 ) discard;\n      `,\n      // fade the traces in and out\n      'fs:DECKGL_FILTER_COLOR': `\\\n        if (searchFlag == 0.0 && vTime <= 10.0) color.a *= (vTime / 10.0);\n      `,\n    }\n    return shaders\n  }\n\n  initializeState(params: any) {\n    super.initializeState(params)\n\n    const attributeManager = this.getAttributeManager()\n    attributeManager.addInstanced({\n      timeStart: { size: 1, accessor: 'getTimeStart' },\n      timeEnd: { size: 1, accessor: 'getTimeEnd' },\n    })\n  }\n\n  draw(params: any) {\n    const { currentTime, searchFlag } = this.props\n\n    params.uniforms = Object.assign({}, params.uniforms, {\n      currentTime,\n      searchFlag,\n    })\n\n    super.draw(params)\n  }\n}\n\nPathTraceLayer.layerName = 'PathTraceLayer'\nPathTraceLayer.defaultProps = defaultProps\n","import React, { useState, useMemo, useEffect } from 'react'\nimport { StaticMap } from 'react-map-gl'\nimport { AmbientLight, PointLight, LightingEffect } from '@deck.gl/core'\nimport DeckGL from '@deck.gl/react'\n\nimport DrtRequestLayer from './DrtRequestLayer'\nimport MovingIconsLayer from '@/layers/moving-icons/moving-icons-layer'\nimport PathTraceLayer from '@/layers/PathTraceLayer'\nimport { MAPBOX_TOKEN, REACT_VIEW_HANDLES } from '@/Globals'\n\nimport globalStore from '@/store'\n\nconst BASE_URL = import.meta.env.BASE_URL\n\nconst ICON_MAPPING = {\n  marker: { x: 0, y: 0, width: 128, height: 128, mask: true },\n  info: { x: 128, y: 0, width: 128, height: 128, mask: true },\n  vehicle: { x: 128, y: 128, width: 128, height: 128, mask: true },\n  diamond: { x: 0, y: 128, width: 128, height: 128, mask: false },\n}\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0,\n})\n\nconst pointLight = new PointLight({\n  color: [255, 255, 255],\n  intensity: 2.0,\n  position: [-74.05, 40.7, 8000],\n})\n\nconst lightingEffect = new LightingEffect({ ambientLight, pointLight })\n\nconst DEFAULT_THEME = {\n  vehicleColor: [200, 130, 250],\n  trailColor0: [235, 235, 25],\n  trailColor1: [23, 184, 190],\n  effects: [lightingEffect],\n}\n\nconst DRT_REQUEST = {\n  time: 0,\n  fromX: 1,\n  fromY: 2,\n  toX: 3,\n  toY: 4,\n  veh: 5,\n  arrival: 6,\n}\n\nexport default function Component(props: {\n  viewId: number\n  dark: boolean\n  simulationTime: number\n  paths: any[]\n  drtRequests: any[]\n  traces: any[]\n  colors: any\n  center: [number, number]\n  settingsShowLayers: { [label: string]: boolean }\n  vehicleLookup: string[]\n  searchEnabled: boolean\n  onClick: any\n}) {\n  const {\n    simulationTime,\n    paths,\n    traces,\n    drtRequests,\n    settingsShowLayers,\n    center,\n    dark,\n    vehicleLookup,\n    searchEnabled,\n    onClick,\n    viewId,\n  } = props\n\n  const theme = DEFAULT_THEME\n\n  // set initial view\n  const [viewState, setViewState] = useState(\n    center\n      ? ({\n          center: [16, 42],\n          longitude: center[0],\n          latitude: center[1],\n          pitch: 0,\n          bearing: 0,\n          zoom: 10,\n        } as any)\n      : Object.assign({}, globalStore.state.viewState)\n  )\n\n  // register setViewState in global view updater so we can respond to external map motion\n  REACT_VIEW_HANDLES[viewId] = () => {\n    setViewState(globalStore.state.viewState)\n  }\n\n  const arcWidth = 1\n  const [hoverInfo, setHoverInfo] = useState({} as any)\n\n  const layers: any = []\n\n  function handleClick() {\n    console.log(hoverInfo)\n    // send null as message that blank area was clicked\n    if (!hoverInfo.object) {\n      onClick(null)\n    } else {\n      onClick(hoverInfo.object.v)\n    }\n  }\n\n  function renderTooltip({ hoverInfo }: any) {\n    const { object, x, y } = hoverInfo\n\n    if (!object) {\n      return null\n    }\n\n    const vehicleId = vehicleLookup[object.v]\n\n    return (\n      <div\n        className=\"tooltip\"\n        style={{\n          fontSize: '0.8rem',\n          backgroundColor: '#ddddeedd',\n          borderLeft: '6px solid green',\n          boxShadow: '2.5px 2px 4px rgba(0,0,0,0.25)',\n          color: '#223',\n          padding: '1rem 1rem',\n          position: 'absolute',\n          left: x + 40,\n          top: y - 30,\n        }}\n      >\n        <big>\n          <b>{vehicleId}</b>\n        </big>\n        <div>Passagiere: {object.occ} </div>\n      </div>\n    )\n  }\n\n  if (settingsShowLayers.routes)\n    layers.push(\n      //@ts-ignore:\n      new PathTraceLayer({\n        id: 'Routen',\n        data: traces,\n        currentTime: simulationTime,\n        getSourcePosition: (d: any) => d.p0,\n        getTargetPosition: (d: any) => d.p1,\n        getTimeStart: (d: any) => d.t0,\n        getTimeEnd: (d: any) => d.t1,\n        getColor: (d: any) => props.colors[d.occ],\n        getWidth: 1, // (d: any) => 3.0 * (d.occ + 1) - 1,\n        opacity: 0.7,\n        widthMinPixels: 2,\n        rounded: false,\n        shadowEnabled: false,\n        searchFlag: searchEnabled ? 1.0 : 0.0,\n        pickable: true,\n        autoHighlight: true,\n        highlightColor: [255, 0, 255],\n        onHover: setHoverInfo,\n      })\n    )\n\n  if (settingsShowLayers.vehicles)\n    layers.push(\n      //@ts-ignore\n      new MovingIconsLayer({\n        id: 'Vehicles',\n        data: paths,\n        getPathStart: (d: any) => d.p0,\n        getPathEnd: (d: any) => d.p1,\n        getTimeStart: (d: any) => d.t0,\n        getTimeEnd: (d: any) => d.t1,\n        getIcon: (d: any) => 'vehicle',\n        getColor: (d: any) => props.colors[d.occ],\n        iconMoving: 'vehicle',\n        iconStill: 'diamond',\n        getSize: searchEnabled ? 72 : 54,\n        opacity: 1.0,\n        currentTime: simulationTime,\n        shadowEnabled: false,\n        noAlloc: true,\n        iconAtlas: `${BASE_URL}/icon-atlas.png`,\n        iconMapping: ICON_MAPPING,\n        sizeScale: 0.5,\n        billboard: false,\n        pickable: true,\n        depthTest: true,\n        autoHighlight: false,\n        highlightColor: [255, 0, 255],\n        onHover: setHoverInfo,\n        parameters: {\n          depthTest: false,\n        },\n      })\n    )\n\n  if (settingsShowLayers.requests)\n    layers.push(\n      //@ts-ignore:\n      new DrtRequestLayer({\n        id: 'DRT Requests',\n        data: drtRequests,\n        currentTime: simulationTime,\n        getSourcePosition: (d: any) => [d[DRT_REQUEST.fromX], d[DRT_REQUEST.fromY]],\n        getTargetPosition: (d: any) => [d[DRT_REQUEST.toX], d[DRT_REQUEST.toY]],\n        getTimeStart: (d: any) => d[DRT_REQUEST.time],\n        getTimeEnd: (d: any) => d[DRT_REQUEST.arrival],\n        getSourceColor: [255, 0, 255],\n        getTargetColor: [200, 255, 255],\n        getWidth: arcWidth,\n        opacity: 0.5,\n        searchFlag: searchEnabled ? 1.0 : 0.0,\n      })\n    )\n\n  return (\n    <DeckGL\n      layers={layers}\n      effects={theme.effects}\n      pickingRadius={5}\n      viewState={viewState}\n      controller={true}\n      getCursor={() => 'pointer'}\n      onClick={handleClick}\n      onViewStateChange={(e: any) => {\n        globalStore.commit('setMapCamera', e.viewState)\n      }}\n    >\n      {\n        /*\n        // @ts-ignore */\n        <StaticMap mapStyle={globalStore.getters.mapStyle} mapboxApiAccessToken={MAPBOX_TOKEN} />\n      }\n      {renderTooltip({ hoverInfo })}\n    </DeckGL>\n  )\n}\n","<template lang=\"pug\">\n.gl-app(:class=\"{'hide-thumbnail': !thumbnail}\"\n        :style='{\"background\": urlThumbnail}' oncontextmenu=\"return false\")\n\n  trip-viz.anim(v-if=\"!thumbnail\"\n                :center = \"vizDetails.center\"\n                :colors = \"COLOR_OCCUPANCY\"\n                :drtRequests = \"$options.drtRequests\"\n                :dark = \"globalState.isDarkMode\"\n                :paths = \"$options.paths\"\n                :settingsShowLayers = \"SETTINGS\"\n                :searchEnabled = \"searchEnabled\"\n                :simulationTime = \"simulationTime\"\n                :traces = \"$options.traces\"\n                :vehicleLookup = \"vehicleLookup\"\n                :viewId = \"viewId\"\n                :onClick = \"handleClick\")\n\n  zoom-buttons(v-if=\"!thumbnail\")\n\n  //- isLoaded && !thumbnail\")\n  .right-side(v-if=\"isLoaded && !thumbnail\")\n    collapsible-panel(direction=\"right\")\n      .big.clock\n        p {{ myState.clock }}\n\n      .panel-items\n        legend-colors.legend-block(v-if=\"legendItems.length\"\n          :title=\"`${$t('passengers')}:`\" :items=\"legendItems\")\n\n        legend-colors.legend-block(:title=\"`${$t('requests')}:`\" :items=\"legendRequests\")\n\n        .search-panel\n          p.speed-label(:style=\"{margin: '1rem 0 0 0'}\") {{ $t('search') }}\n          form(autocomplete=\"off\")\n          .field\n            p.control.has-icons-left\n              input.input.is-small(type=\"email\" :placeholder=\"`${$t('search')}...`\" v-model=\"searchTerm\")\n              span.icon.is-small.is-left\n                i.fas.fa-search\n\n        settings-panel.settings-area(:items=\"SETTINGS\" @click=\"handleSettingChange\")\n\n        .speed-block\n          p.speed-label {{ $t('speed') }}:\n            br\n            | {{ speed }}x\n\n          b-slider.speed-slider(v-model=\"speed\"\n            :min=\"speedStops[0]\"\n            :max=\"speedStops[speedStops.length-1]\"\n            :duration=\"0\"\n            :dotSize=\"20\"\n            :tooltip=\"true\"\n            tooltip-placement=\"bottom\"\n            :tooltip-formatter=\"val => val + 'x'\"\n          )\n            template(v-for=\"val in speedStops\")\n              b-slider-tick(:value=\"val\" :key=\"val\")\n\n  playback-controls.bottom-area(v-if=\"!thumbnail && isLoaded\"\n      @click='toggleSimulation'\n      @time='setTime'\n      :timeStart = \"timeStart\"\n      :timeEnd = \"timeEnd\"\n      :isRunning = \"myState.isRunning\"\n      :currentTime = \"simulationTime\")\n\n</template>\n\n<script lang=\"ts\">\nconst i18n = {\n  messages: {\n    en: {\n      requests: 'DRT Requests',\n      passengers: 'Passengers',\n      search: 'Search',\n      showhide: 'Show/Hide',\n      vehicles: 'Vehicles',\n      routes: 'Routes',\n      speed: 'Speed',\n    },\n    de: {\n      requests: 'DRT Anfragen',\n      passengers: 'Passagiere',\n      search: 'Suche',\n      showhide: 'Ein-/Ausblenden',\n      vehicles: 'DRT Fahrzeuge',\n      routes: 'DRT Routen',\n      speed: 'Geschwindigkeit',\n    },\n  },\n}\n\nimport { defineComponent } from 'vue'\nimport type { PropType } from 'vue'\n\nimport { ToggleButton } from 'vue-js-toggle-button'\nimport readBlob from 'read-blob'\nimport YAML from 'yaml'\nimport crossfilter from 'crossfilter2'\nimport { blobToArrayBuffer, blobToBinaryString } from 'blob-util'\n\nimport globalStore from '@/store'\nimport CollapsiblePanel from '@/components/CollapsiblePanel.vue'\nimport LegendColors from './LegendColors'\nimport PlaybackControls from '@/components/PlaybackControls.vue'\nimport SettingsPanel from './SettingsPanel.vue'\nimport ZoomButtons from '@/components/ZoomButtons.vue'\nimport { arrayBufferToBase64, gUnzip } from '@/js/util'\n\nimport {\n  ColorScheme,\n  FileSystem,\n  LegendItem,\n  LegendItemType,\n  FileSystemConfig,\n  VisualizationPlugin,\n  LIGHT_MODE,\n  DARK_MODE,\n  REACT_VIEW_HANDLES,\n} from '@/Globals'\n\nimport TripViz from './TripViz'\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\n\nconst MyComponent = defineComponent({\n  name: 'VehicleAnimationPlugin',\n  i18n,\n  components: {\n    CollapsiblePanel,\n    SettingsPanel,\n    LegendColors,\n    TripViz,\n    PlaybackControls,\n    ToggleButton,\n    ZoomButtons,\n  },\n  props: {\n    root: { type: String, required: true },\n    subfolder: { type: String, required: true },\n    yamlConfig: String,\n    thumbnail: Boolean,\n  },\n  data: () => {\n    const COLOR_OCCUPANCY = {\n      0: [140, 140, 160],\n      1: [85, 255, 85],\n      2: [255, 255, 85],\n      3: [240, 110, 30],\n      4: [192, 30, 50],\n    } as any\n\n    const SETTINGS = {\n      vehicles: true,\n      routes: true,\n      requests: false,\n    } as any\n\n    return {\n      viewId: Math.floor(1e12 * Math.random()),\n      COLOR_OCCUPANCY,\n      SETTINGS,\n      legendItems: Object.keys(COLOR_OCCUPANCY).map(key => {\n        return {\n          type: LegendItemType.line,\n          color: COLOR_OCCUPANCY[key],\n          value: key,\n          label: key,\n        }\n      }),\n\n      legendRequests: [{ type: LegendItemType.line, color: [255, 0, 255], value: 0, label: '' }],\n\n      vizDetails: {\n        network: '',\n        drtTrips: '',\n        projection: '',\n        title: '',\n        description: '',\n        thumbnail: '',\n        center: [-122, 37.3],\n        zoom: 10,\n        mapIsIndependent: false,\n        theme: '',\n      },\n\n      myState: {\n        statusMessage: '',\n        clock: '00:00',\n        colorScheme: ColorScheme.DarkMode,\n        isRunning: false,\n        isShowingHelp: false,\n        subfolder: '',\n        yamlConfig: '',\n        thumbnail: false,\n        data: [] as any[],\n      },\n\n      timeStart: 0,\n      timeEnd: 86400,\n\n      traces: crossfilter([]) as crossfilter.Crossfilter<any>,\n      traceStart: {} as crossfilter.Dimension<any, any>,\n      traceEnd: {} as crossfilter.Dimension<any, any>,\n      traceVehicle: {} as crossfilter.Dimension<any, any>,\n\n      paths: crossfilter([]) as crossfilter.Crossfilter<any>,\n      pathStart: {} as crossfilter.Dimension<any, any>,\n      pathEnd: {} as crossfilter.Dimension<any, any>,\n      pathVehicle: {} as crossfilter.Dimension<any, any>,\n\n      requests: crossfilter([]) as crossfilter.Crossfilter<any>,\n      requestStart: {} as crossfilter.Dimension<any, any>,\n      requestEnd: {} as crossfilter.Dimension<any, any>,\n      requestVehicle: {} as crossfilter.Dimension<any, any>,\n\n      simulationTime: 5 * 3600, // 8 * 3600 + 10 * 60 + 10\n\n      timeElapsedSinceLastFrame: 0,\n\n      searchTerm: '',\n      searchEnabled: false,\n\n      globalState: globalStore.state,\n      isDarkMode: globalStore.state.isDarkMode,\n      isLoaded: true,\n      showHelp: false,\n\n      speedStops: [-20, -10, -5, -2, -1, -0.5, -0.25, 0, 0.25, 0.5, 1, 2, 5, 10, 20],\n      speed: 10,\n\n      legendBits: [] as any[],\n      isEmbedded: false,\n      thumbnailUrl: \"url('assets/thumbnail.jpg') no-repeat;\",\n\n      vehicleLookup: [] as string[],\n      vehicleLookupString: {} as { [id: string]: number },\n      isPausedDueToHiding: false,\n    }\n  },\n  computed: {\n    fileApi(): HTTPFileSystem {\n      return new HTTPFileSystem(this.fileSystem, globalStore)\n    },\n\n    fileSystem(): FileSystemConfig {\n      const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\n        (a: FileSystemConfig) => a.slug === this.root\n      )\n      if (svnProject.length === 0) {\n        console.log('no such project')\n        throw Error\n      }\n      return svnProject[0]\n    },\n\n    urlThumbnail(): string {\n      return this.thumbnailUrl\n    },\n    textColor(): any {\n      const lightmode = {\n        text: '#3498db',\n        bg: '#eeeef480',\n      }\n\n      const darkmode = {\n        text: 'white',\n        bg: '#181518aa',\n      }\n\n      return this.myState.colorScheme === ColorScheme.DarkMode ? darkmode : lightmode\n    },\n  },\n  watch: {\n    '$store.state.viewState'() {\n      if (this.vizDetails.mapIsIndependent) return\n\n      if (!REACT_VIEW_HANDLES[this.viewId]) return\n      REACT_VIEW_HANDLES[this.viewId]()\n    },\n\n    async 'globalState.authAttempts'() {\n      console.log('AUTH CHANGED - Reload')\n      if (!this.yamlConfig) this.buildRouteFromUrl()\n      await this.getVizDetails()\n    },\n\n    'globalState.colorScheme'() {\n      this.isDarkMode = this.globalState.colorScheme === ColorScheme.DarkMode\n      this.updateLegendColors()\n    },\n\n    searchTerm() {\n      const vehicleNumber = this.vehicleLookupString[this.searchTerm]\n      if (vehicleNumber > -1) {\n        console.log('vehicle', vehicleNumber)\n        this.pathVehicle?.filterExact(vehicleNumber)\n        this.traceVehicle?.filterExact(vehicleNumber)\n        this.requestVehicle?.filterExact(vehicleNumber)\n        this.requestStart.filterAll()\n        this.requestEnd.filterAll()\n        this.searchEnabled = true\n      } else {\n        console.log('nope')\n        this.pathVehicle?.filterAll()\n        this.traceVehicle?.filterAll()\n        this.requestVehicle?.filterAll()\n        this.searchEnabled = false\n      }\n      this.updateDatasetFilters()\n    },\n  },\n  methods: {\n    async handleSettingChange(label: string) {\n      console.log(label)\n      this.SETTINGS[label] = !this.SETTINGS[label]\n      this.updateDatasetFilters()\n      this.simulationTime += 1 // this will force a redraw\n    },\n\n    // this happens if viz is the full page, not a thumbnail on a project page\n    buildRouteFromUrl() {\n      const params = this.$route.params\n      if (!params.project || !params.pathMatch) {\n        console.log('I CANT EVEN: NO PROJECT/PARHMATCH')\n        return\n      }\n\n      // subfolder and config file\n      const sep = 1 + params.pathMatch.lastIndexOf('/')\n      const subfolder = params.pathMatch.substring(0, sep)\n      const config = params.pathMatch.substring(sep)\n\n      this.myState.subfolder = subfolder\n      this.myState.yamlConfig = config\n    },\n\n    async getVizDetails() {\n      // first get config\n      try {\n        // might be a project config:\n        const filename =\n          this.myState.yamlConfig.indexOf('/') > -1\n            ? this.myState.yamlConfig\n            : this.myState.subfolder + '/' + this.myState.yamlConfig\n\n        const text = await this.fileApi.getFileText(filename)\n        this.vizDetails = YAML.parse(text)\n      } catch (err) {\n        console.log('failed')\n        const e = err as any\n        // maybe it failed because password?\n        if (this.fileSystem.needPassword && e.status === 401) {\n          globalStore.commit('requestLogin', this.fileSystem.slug)\n        }\n      }\n\n      // initial view\n      if (this.vizDetails.theme) this.$store.commit('setTheme', this.vizDetails.theme)\n\n      if (this.vizDetails.center) {\n        this.$store.commit('setMapCamera', {\n          longitude: this.vizDetails.center[0],\n          latitude: this.vizDetails.center[1],\n          zoom: this.vizDetails.zoom || 10,\n          pitch: 20,\n          bearing: 0,\n        })\n      }\n\n      // title\n      const t = this.vizDetails.title ? this.vizDetails.title : 'Agent Animation'\n      this.$emit('title', t)\n\n      this.buildThumbnail()\n    },\n\n    async buildThumbnail() {\n      if (this.thumbnail && this.vizDetails.thumbnail) {\n        try {\n          const blob = await this.fileApi.getFileBlob(\n            this.myState.subfolder + '/' + this.vizDetails.thumbnail\n          )\n          const buffer = await readBlob.arraybuffer(blob)\n          const base64 = arrayBufferToBase64(buffer)\n          if (base64)\n            this.thumbnailUrl = `center / cover no-repeat url(data:image/png;base64,${base64})`\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    },\n\n    handleClick(vehicleNumber: any) {\n      // null means empty area clicked: clear map.\n      if (vehicleNumber === null) {\n        this.searchTerm = ''\n        return\n      }\n\n      const vehId = this.vehicleLookup[vehicleNumber]\n      console.log(vehId)\n\n      // set -- or clear -- search box!\n      if (this.searchTerm === vehId) this.searchTerm = ''\n      else this.searchTerm = vehId\n    },\n\n    updateLegendColors() {\n      // const theme = this.myState.colorScheme == ColorScheme.LightMode ? LIGHT_MODE : DARK_MODE\n      // this.legendBits = [\n      //   { label: 'susceptible', color: theme.susceptible },\n      //   { label: 'latently infected', color: theme.infectedButNotContagious },\n      //   { label: 'contagious', color: theme.contagious },\n      //   { label: 'symptomatic', color: theme.symptomatic },\n      //   { label: 'seriously ill', color: theme.seriouslyIll },\n      //   { label: 'critical', color: theme.critical },\n      //   { label: 'recovered', color: theme.recovered },\n      // ]\n    },\n\n    setWallClock() {\n      const hour = Math.floor(this.simulationTime / 3600)\n      const minute = Math.floor(this.simulationTime / 60) % 60\n      this.myState.clock = `${hour < 10 ? '0' : ''}${hour}${minute < 10 ? ':0' : ':'}${minute}`\n    },\n\n    setTime(seconds: number) {\n      this.simulationTime = seconds\n      this.setWallClock()\n\n      // only filter if search is disabled and we have data loaded already\n      if (this.traceStart && this.pathStart && this.requestStart) {\n        this.pathStart.filter([0, this.simulationTime])\n        this.pathEnd.filter([this.simulationTime, Infinity])\n\n        // scrub vehicles if search is disabled\n        if (!this.searchEnabled) {\n          this.traceStart.filter([0, this.simulationTime])\n          this.traceEnd.filter([this.simulationTime, Infinity])\n          this.requestStart.filter([0, this.simulationTime])\n          this.requestEnd.filter([this.simulationTime, Infinity])\n        }\n      }\n\n      //@ts-ignore\n      this.$options.paths = this.paths.allFiltered()\n      //@ts-ignore\n      this.$options.traces = this.traces.allFiltered()\n      //@ts-ignore\n      this.$options.drtRequests = this.requests.allFiltered()\n    },\n\n    toggleSimulation() {\n      this.myState.isRunning = !this.myState.isRunning\n      this.timeElapsedSinceLastFrame = Date.now()\n\n      // ok so, many times I mashed the play/pause wondering why things wouldn't\n      // start moving. Turns out a 0x speed is not very helpful! Help the user\n      // out and switch the speed up if they press play.\n      if (this.myState.isRunning && this.speed === 0.0) this.speed = 1.0\n\n      // and begin!\n      if (this.myState.isRunning) this.animate()\n    },\n\n    async parseDrtRequests(requests: any[]) {\n      if (this.vehicleLookup.length) {\n        for (const request of requests) {\n          try {\n            request[5] = this.vehicleLookupString[request[5]]\n          } catch (e) {}\n        }\n      }\n\n      return crossfilter(requests)\n    },\n\n    async parseVehicles(trips: any[]) {\n      const allTrips: any[] = []\n      let vehNumber = -1\n\n      for (const trip of trips) {\n        const path = trip.path\n        const timestamps = trip.timestamps\n        const passengers = trip.passengers\n\n        // attach vehicle ID to each segment so we can click\n        vehNumber++\n        this.vehicleLookup[vehNumber] = trip.id\n        this.vehicleLookupString[trip.id] = vehNumber\n\n        for (let i = 0; i < trip.path.length - 1; i++) {\n          const trip = {\n            t0: timestamps[i],\n            t1: timestamps[i + 1],\n            p0: path[i],\n            p1: path[i + 1],\n            v: vehNumber,\n            occ: passengers[i],\n          }\n          // grey out vehicles that aren't moving\n          if (trip.p0[0] == trip.p1[0] && trip.p0[1] == trip.p1[1]) trip.occ = 0\n\n          allTrips.push(trip)\n        }\n      }\n      return crossfilter(allTrips)\n    },\n\n    setEmbeddedMode() {\n      if ('embed' in this.$route.query) {\n        console.log('EMBEDDED MODE')\n        this.isEmbedded = true\n        this.$store.commit('setShowLeftBar', false)\n        this.$store.commit('setFullWidth', true)\n      }\n    },\n\n    updateDatasetFilters() {\n      // dont' filter if we haven't loaded yet\n      if (!this.traceStart || !this.pathStart || !this.requestStart) return\n\n      // filter out all traces that havent started or already finished\n      if (this.SETTINGS.routes) {\n        if (this.searchEnabled) {\n          this.traceStart.filterAll()\n          this.traceEnd.filterAll()\n        } else {\n          this.traceStart.filter([0, this.simulationTime])\n          this.traceEnd.filter([this.simulationTime, Infinity])\n        }\n        //@ts-ignore\n        this.$options.traces = this.traces.allFiltered()\n      }\n\n      if (this.SETTINGS.vehicles) {\n        this.pathStart.filter([0, this.simulationTime])\n        this.pathEnd.filter([this.simulationTime, Infinity])\n        //@ts-ignore:\n        this.$options.paths = this.paths.allFiltered()\n      }\n\n      if (this.SETTINGS.requests) {\n        if (this.searchEnabled) {\n          this.requestStart.filterAll()\n          this.requestEnd.filterAll()\n        } else {\n          this.requestStart.filter([0, this.simulationTime])\n          this.requestEnd.filter([this.simulationTime, Infinity])\n        }\n        //@ts-ignore\n        this.$options.drtRequests = this.requests.allFiltered()\n      }\n    },\n\n    animate() {\n      if (this.myState.isRunning) {\n        const elapsed = Date.now() - this.timeElapsedSinceLastFrame\n        this.timeElapsedSinceLastFrame += elapsed\n        this.simulationTime += elapsed * this.speed * 0.06\n\n        this.updateDatasetFilters()\n        this.setWallClock()\n        window.requestAnimationFrame(this.animate)\n      }\n    },\n\n    handleVisibilityChange() {\n      if (this.isPausedDueToHiding && !document.hidden) {\n        console.log('unpausing')\n        this.isPausedDueToHiding = false\n        this.toggleSimulation()\n      } else if (this.myState.isRunning && document.hidden) {\n        console.log('pausing')\n        this.isPausedDueToHiding = true\n        this.toggleSimulation()\n      }\n    },\n\n    // convert path/timestamp info into path traces we can use\n    async parseRouteTraces(trips: any[]) {\n      let countTraces = 0\n      let vehNumber = -1\n\n      const traces: any = []\n\n      for (const vehicle of trips) {\n        vehNumber++\n\n        let time = vehicle.timestamps[0]\n        let nextTime = vehicle.timestamps[0]\n\n        let segments: any[] = []\n\n        for (let i = 1; i < vehicle.path.length; i++) {\n          nextTime = vehicle.timestamps[i]\n\n          // same point? start of new path.\n          if (\n            vehicle.path[i][0] === vehicle.path[i - 1][0] &&\n            vehicle.path[i][1] === vehicle.path[i - 1][1]\n          ) {\n            segments.forEach(segment => {\n              segment.t1 = vehicle.timestamps[i - 1]\n            })\n\n            traces.push(...segments)\n\n            segments = []\n            time = nextTime\n          } else {\n            segments.push({\n              t0: time,\n              p0: vehicle.path[i - 1],\n              p1: vehicle.path[i],\n              v: vehNumber,\n              occ: vehicle.passengers[i - 1],\n            })\n          }\n        }\n\n        // save final segments\n        segments.forEach(segment => {\n          segment.t1 = nextTime\n        })\n        traces.push(...segments)\n      }\n\n      return crossfilter(traces)\n    },\n\n    async loadFiles() {\n      let trips: any[] = []\n      let drtRequests: any = []\n\n      try {\n        if (this.vizDetails.drtTrips.endsWith('json')) {\n          const json = await this.fileApi.getFileJson(\n            this.myState.subfolder + '/' + this.vizDetails.drtTrips\n          )\n          trips = json.trips\n          drtRequests = json.drtRequests\n        } else if (this.vizDetails.drtTrips.endsWith('gz')) {\n          const blob = await this.fileApi.getFileBlob(\n            this.myState.subfolder + '/' + this.vizDetails.drtTrips\n          )\n          const buffer = await blob.arrayBuffer()\n          // recursively gunzip until it can gunzip no more:\n          const unzipped = gUnzip(buffer)\n          const text = new TextDecoder('utf-8').decode(unzipped)\n          const json = JSON.parse(text)\n          trips = json.trips\n          drtRequests = json.drtRequests\n        }\n      } catch (e) {\n        console.error(e)\n        this.myState.statusMessage = '' + e\n      }\n      return { trips, drtRequests }\n    },\n\n    toggleLoaded(loaded: boolean) {\n      this.isLoaded = loaded\n    },\n\n    rotateColors() {\n      this.myState.colorScheme =\n        this.myState.colorScheme === ColorScheme.DarkMode\n          ? ColorScheme.LightMode\n          : ColorScheme.DarkMode\n      localStorage.setItem('plugin/agent-animation/colorscheme', this.myState.colorScheme)\n    },\n  },\n\n  async mounted() {\n    globalStore.commit('setFullScreen', !this.thumbnail)\n\n    this.myState.thumbnail = this.thumbnail\n    this.myState.yamlConfig = this.yamlConfig ?? ''\n    this.myState.subfolder = this.subfolder\n\n    // EMBED MODE?\n    this.setEmbeddedMode()\n\n    await this.getVizDetails()\n\n    if (this.thumbnail) return\n\n    this.showHelp = false\n    this.updateLegendColors()\n\n    this.setWallClock()\n\n    this.myState.statusMessage = '/ Dateien laden...'\n    console.log('loading files')\n    const { trips, drtRequests } = await this.loadFiles()\n\n    console.log('parsing vehicle motion')\n    this.myState.statusMessage = `${this.$t('vehicles')}...`\n    this.paths = await this.parseVehicles(trips)\n    this.pathStart = this.paths.dimension(d => d.t0)\n    this.pathEnd = this.paths.dimension(d => d.t1)\n    this.pathVehicle = this.paths.dimension(d => d.v)\n\n    console.log('Routes...')\n    this.myState.statusMessage = `${this.$t('routes')}...`\n    this.traces = await this.parseRouteTraces(trips)\n    this.traceStart = this.traces.dimension(d => d.t0)\n    this.traceEnd = this.traces.dimension(d => d.t1)\n    this.traceVehicle = this.traces.dimension(d => d.v)\n\n    console.log('Requests...')\n    this.myState.statusMessage = `${this.$t('requests')}...`\n    this.requests = await this.parseDrtRequests(drtRequests)\n    this.requestStart = this.requests.dimension(d => d[0]) // time0\n    this.requestEnd = this.requests.dimension(d => d[6]) // arrival\n    this.requestVehicle = this.requests.dimension(d => d[5])\n\n    console.log('GO!')\n    this.myState.statusMessage = ''\n\n    document.addEventListener('visibilitychange', this.handleVisibilityChange, false)\n\n    this.myState.isRunning = true\n    this.timeElapsedSinceLastFrame = Date.now()\n    this.animate()\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('visibilityChange', this.handleVisibilityChange)\n    globalStore.commit('setFullScreen', false)\n    this.$store.commit('setFullScreen', false)\n    this.myState.isRunning = false\n  },\n})\n\nexport default MyComponent\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles.scss';\n\n.gl-app {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  display: grid;\n  pointer-events: none;\n  min-height: $thumbnailHeight;\n  background: url('assets/thumbnail.jpg') no-repeat;\n  background-size: cover;\n  grid-template-columns: 1fr min-content;\n  grid-template-rows: auto auto 1fr auto;\n  grid-template-areas:\n    'title         clock'\n    '.           rightside'\n    'playback    rightside';\n}\n\n.gl-app.hide-thumbnail {\n  background: none;\n}\n\n.nav {\n  z-index: 5;\n  grid-column: 1 / 4;\n  grid-row: 1 / 4;\n  box-shadow: 0px 2px 10px #22222266;\n  display: flex;\n  flex-direction: row;\n  margin: auto auto 0 0;\n  background-color: var(--bgPanel);\n  padding: 0rem 3rem;\n\n  a {\n    color: white;\n    text-decoration: none;\n\n    &.router-link-exact-active {\n      color: white;\n    }\n  }\n\n  p {\n    margin: auto 0.5rem auto 0;\n    font-weight: normal;\n    padding: 0 0;\n    color: var(--textFancy);\n  }\n}\n\n.speed-block {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.legend-block {\n  margin-top: 1rem;\n}\n\n.speed-slider {\n  flex: 1;\n  width: 100%;\n  margin: 0.5rem 0.25rem 0.25rem 0rem;\n  padding: 0 0.5rem;\n  font-weight: bold;\n}\n\n.big {\n  padding: 0rem 0;\n  font-size: 2.5rem;\n  line-height: 3.75rem;\n  font-weight: bold;\n}\n\n.right-side {\n  width: 11rem;\n  grid-area: rightside;\n  display: flex;\n  flex-direction: column;\n  font-size: 0.8rem;\n  pointer-events: auto;\n  margin-top: auto;\n  margin-bottom: 35px;\n  z-index: 5;\n}\n\n.bottom-area {\n  grid-area: playback;\n  display: flex;\n  flex-direction: row;\n  margin-top: auto;\n  margin-bottom: 35px;\n  padding: 0.5rem 1rem;\n  pointer-events: auto;\n  width: 100%;\n}\n\n.settings-area {\n  z-index: 20;\n  pointer-events: auto;\n  font-size: 0.8rem;\n  padding: 0.25rem 0;\n  margin: 1.5rem 0rem 0 0;\n}\n\n.anim {\n  grid-column: 1 / 3;\n  grid-row: 1 / 7;\n  pointer-events: auto;\n}\n\n.speed-label {\n  font-size: 0.8rem;\n  font-weight: bold;\n}\n\n.clock {\n  color: white;\n  width: 100%;\n  background-color: #000000cc;\n  border: 3px solid white;\n  color: white;\n}\n\n.clock p {\n  text-align: center;\n  padding: 5px 1.5rem;\n}\n\n.tooltip {\n  padding: 5rem 5rem;\n  background-color: #ccc;\n}\n\n.panel-items {\n  margin: 0.5rem 0.5rem;\n  margin-bottom: 1rem;\n}\n\ninput {\n  border: none;\n  background-color: var(--bgCream);\n  color: #ccc;\n}\n\n.left-side {\n  grid-column: 1/4;\n  grid-row: 1/4;\n  display: flex;\n  flex-direction: column;\n  font-size: 0.8rem;\n  pointer-events: auto;\n  margin: 0 auto 0 0;\n  z-index: 1;\n}\n\n@media only screen and (max-width: 640px) {\n  .nav {\n    padding: 0.5rem 0.5rem;\n  }\n\n  .clock {\n    text-align: center;\n  }\n\n  .right-side {\n    font-size: 0.7rem;\n    margin-right: 0.25rem;\n  }\n\n  .big {\n    padding: 0 0rem;\n    margin-top: 0.5rem;\n    font-size: 1.3rem;\n    line-height: 2rem;\n  }\n\n  .side-section {\n    margin-left: 0;\n  }\n\n  .extra-buttons {\n    margin-right: 1rem;\n  }\n  .playback-stuff {\n    padding-right: 1rem;\n  }\n}\n</style>\n"],"names":["DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","DEFAULT_ATTENUATION","DEFAULT_LIGHT_POSITION","idCount","PointLight","props","_defineProperty","color","intensity","position","getAttenuation","layer","projectedLight","viewport","coordinateSystem","coordinateOrigin","projectPosition","COORDINATE_SYSTEM","Component","listItems","React","item","_sfc_main$1","defineComponent","v","index","seconds","hms","timeConvert","minutes","value","ev","i18n","_sfc_main","ToggleButton","defaultProps","DrtRequestArcLayer","ArcLayer","shaders","params","currentTime","DEFAULT_COLOR","x","IconLayer","Layer","vertShader","fragShader","project32","picking","IconManager","GL","oldProps","changeFlags","attributeManager","iconAtlas","iconMapping","data","getIcon","iconManager","iconMappingChanged","gl","_a","uniforms","sizeScale","sizeMinPixels","sizeMaxPixels","sizeUnits","billboard","alphaCutoff","iconStill","pickable","iconsTexture","positions","Model","Geometry","evt","onIconError","log","icon","rect","PathTraceLayer","LineLayer","searchFlag","BASE_URL","ICON_MAPPING","ambientLight","AmbientLight","pointLight","lightingEffect","LightingEffect","DEFAULT_THEME","DRT_REQUEST","simulationTime","paths","traces","drtRequests","settingsShowLayers","center","dark","vehicleLookup","searchEnabled","onClick","viewId","theme","viewState","setViewState","useState","globalStore","REACT_VIEW_HANDLES","arcWidth","hoverInfo","setHoverInfo","layers","handleClick","renderTooltip","object","y","vehicleId","d","MovingIconsLayer","DrtRequestLayer","DeckGL","e","StaticMap","MAPBOX_TOKEN","MyComponent","CollapsiblePanel","SettingsPanel","LegendColors","TripViz","PlaybackControls","ZoomButtons","COLOR_OCCUPANCY","SETTINGS","key","LegendItemType","ColorScheme","crossfilter","HTTPFileSystem","svnProject","a","lightmode","darkmode","vehicleNumber","_b","_c","_d","_e","_f","label","sep","subfolder","config","filename","text","YAML","err","t","blob","buffer","readBlob","base64","arrayBufferToBase64","vehId","hour","minute","requests","request","trips","allTrips","vehNumber","trip","path","timestamps","passengers","i","elapsed","vehicle","time","nextTime","segments","segment","json","unzipped","gUnzip","loaded"],"mappings":"w5BAGA,MAAMA,GAAsB,CAAC,IAAK,IAAK,GAAG,EACpCC,GAA0B,EAC1BC,GAAsB,CAAC,EAAG,EAAG,CAAC,EAC9BC,GAAyB,CAAC,EAAK,EAAK,CAAG,EAC7C,IAAIC,GAAU,EACP,MAAMC,EAAW,CACtB,YAAYC,EAAQ,GAAI,CACtBC,EAAgB,KAAM,KAAM,MAAM,EAElCA,EAAgB,KAAM,QAAS,MAAM,EAErCA,EAAgB,KAAM,YAAa,MAAM,EAEzCA,EAAgB,KAAM,OAAQ,OAAO,EAErCA,EAAgB,KAAM,WAAY,MAAM,EAExCA,EAAgB,KAAM,cAAe,MAAM,EAE3CA,EAAgB,KAAM,iBAAkB,MAAM,EAE9C,KAAM,CACJ,MAAAC,EAAQR,EACT,EAAGM,EACE,CACJ,UAAAG,EAAYR,EACb,EAAGK,EACE,CACJ,SAAAI,EAAWP,EACZ,EAAGG,EACJ,KAAK,GAAKA,EAAM,IAAM,SAAS,OAAOF,IAAS,EAC/C,KAAK,MAAQI,EACb,KAAK,UAAYC,EACjB,KAAK,KAAO,QACZ,KAAK,SAAWC,EAChB,KAAK,YAAcC,GAAeL,CAAK,EACvC,KAAK,eAAiB,CAAE,GAAG,IAC/B,CACG,CAED,kBAAkB,CAChB,MAAAM,CACJ,EAAK,CACD,KAAM,CACJ,eAAAC,CACD,EAAG,KACEC,EAAWF,EAAM,QAAQ,SACzB,CACJ,iBAAAG,EACA,iBAAAC,CACN,EAAQJ,EAAM,MACJF,EAAWO,GAAgB,KAAK,SAAU,CAC9C,SAAAH,EACA,iBAAAC,EACA,iBAAAC,EACA,qBAAsBF,EAAS,aAAeI,EAAkB,OAASA,EAAkB,UAC3F,qBAAsB,CAAC,EAAG,EAAG,CAAC,CACpC,CAAK,EACD,OAAAL,EAAe,MAAQ,KAAK,MAC5BA,EAAe,UAAY,KAAK,UAChCA,EAAe,SAAWH,EACnBG,CACR,CAEH,CAEA,SAASF,GAAeL,EAAO,CAC7B,OAAIA,EAAM,YACDA,EAAM,YAGX,cAAeA,EACV,CAAC,EAAG,EAAGA,EAAM,WAAa,CAAC,EAG7BJ,EACT,CC5EA,SAAwBiB,GAAUb,EAK/B,CACK,MAAAc,EAAYd,EAAM,MAAM,OAC3Be,EAAA,cAAA,KAAA,CAAG,IAAKC,EAAK,MAAQA,EAAK,MAAM,CAAC,EAAG,MAAO,CAAE,QAAS,MAAO,GAC3DA,EAAK,OACJD,EAAA,cAAC,MAAA,CACC,MAAO,CACL,OAAQ,oBACR,WAAY,MACd,CAAA,EAECC,EAAK,KAGV,EAAAD,EAAA,cAAC,MAAA,CACC,MAAO,CACL,MAAO,OACP,OAAQ,MACR,UAAW,SACX,gBAAiB,OAAOC,EAAK,KAAK,GACpC,CAAA,CAEJ,CAAA,CACD,EAED,uBACG,MACC,KAAAD,EAAA,cAAC,KAAA,CACC,MAAO,CACL,UAAW,OACX,WAAY,OACZ,OAAQ,mBACR,SAAU,QACZ,CAAA,EAECf,EAAM,KAAA,EAERe,EAAA,cAAA,IAAA,KAAGf,EAAM,WAAY,kBACrB,KAAG,CAAA,MAAO,CAAE,UAAW,OAAQ,QAAS,EAAG,OAAQ,CAAE,CAAA,EAAIc,CAAU,CACtE,CAEJ,CC3BA,MAAAG,GAAAC,EAAA,CACA,KAAA,mBACA,MAAA,CACA,UAAA,CAAA,KAAA,QAAA,SAAA,EAAA,EACA,UAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,QAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,YAAA,CAAA,KAAA,OAAA,SAAA,EAAA,CACA,EACA,KAAA,KACA,CACA,mBAAA,GACA,YAAA,EACA,cAAA,CACA,IAAA,EACA,IAAA,IACA,UAAA,GACA,SAAA,EACA,KAAA,GACA,QAAA,GACA,oBAAA,KACA,CAAA,GAGA,SAAA,CACA,KAAA,cAAA,kBAAA,EAAAC,GACA,KAAA,iCAAAA,CAAA,EAEA,OAAA,iBAAA,QAAA,KAAA,YAAA,CACA,EAEA,eAAA,CACA,OAAA,oBAAA,QAAA,KAAA,YAAA,CACA,EACA,MAAA,CACA,aAAA,CACA,KAAA,YACA,KAAA,KAAA,YAAA,KAAA,YAAA,KAAA,QAAA,KAAA,UACA,CACA,EAEA,QAAA,CACA,kBAAA,CACA,KAAA,MAAA,OAAA,CACA,EAEA,iCAAAC,EAAA,CACA,MAAAC,EAAA,KAAA,qBAAAD,CAAA,EAEA,GAAA,CACA,MAAAE,EAAAC,EAAAF,CAAA,EACAG,GAAA,KAAAF,EAAA,SAAA,MAAA,EAAA,EACA,MAAA,GAAAA,EAAA,KAAA,IAAAE,CAAA,QACA,CACA,MAAA,OACA,CACA,EAEA,WAAA,CACA,KAAA,YACA,KAAA,mBAAA,GACA,KAAA,MAAA,OAAA,EAEA,EAEA,SAAA,CACA,KAAA,oBAAA,KAAA,MAAA,OAAA,EACA,KAAA,mBAAA,EACA,EAEA,SAAAC,EAAA,CACA,KAAA,MAAA,OAAA,KAAA,qBAAAA,CAAA,CAAA,CACA,EAEA,aAAAC,EAAA,CACAA,EAAA,OAAA,SAAA,KAAA,iBAAA,CACA,EAEA,qBAAAD,EAAA,CACA,IAAAJ,GAAA,KAAA,QAAA,KAAA,WAAAI,EAAA,IACA,OAAAJ,IAAA,KAAA,UAAAA,EAAA,KAAA,QAAA,GACAA,CACA,CACA,CACA,CAAA,qpBCxFAM,GAAA,CACA,SAAA,CACA,GAAA,CACA,SAAA,oBACA,WAAA,aACA,OAAA,SACA,SAAA,YACA,SAAA,eACA,OAAA,SACA,MAAA,QACA,kBAAA,aACA,EACA,GAAA,CACA,SAAA,oBACA,WAAA,aACA,OAAA,QACA,SAAA,kBACA,SAAA,gBACA,OAAA,SACA,MAAA,kBACA,kBAAA,gBACA,CACA,CACA,EAKAC,GAAAV,EAAA,CACA,KAAA,oBAAA,KACAS,GACA,WAAA,CAAAE,aAAAA,EAAAA,YAAA,EACA,MAAA,CACA,MAAA,CAAA,KAAA,OAAA,SAAA,EAAA,CACA,CACA,CAAA,uiBCjDMC,GAAe,CACnB,YAAa,CAAE,KAAM,SAAU,MAAO,EAAG,IAAK,CAAE,EAChD,aAAc,CAAE,KAAM,WAAY,MAAO,IAAK,EAC9C,WAAY,CAAE,KAAM,WAAY,MAAO,IAAK,EAC5C,WAAY,CAAE,KAAM,SAAU,MAAO,CAAE,CACzC,EAEA,MAAqBC,UAA2BC,EAAS,CACvD,YAAa,CACL,MAAAC,EAAU,MAAM,aACtB,OAAAA,EAAQ,OAAS,CAEf,WAAY;AAAA;AAAA;AAAA;AAAA;AAAA,QAOZ,iBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAYlB,WAAY;AAAA;AAAA;AAAA,QAKZ,iBAAkB;AAAA,QAIlB,yBAA0B;AAAA,OAAA,EAIrBA,CACT,CAEA,gBAAgBC,EAAa,CAC3B,MAAM,gBAAgBA,CAAM,EAEH,KAAK,sBACb,aAAa,CAC5B,UAAW,CAAE,KAAM,EAAG,SAAU,cAAe,EAC/C,QAAS,CAAE,KAAM,EAAG,SAAU,YAAa,CAAA,CAC5C,CACH,CAEA,KAAKA,EAAa,CACV,KAAA,CAAE,YAAAC,CAAY,EAAI,KAAK,MAE7BD,EAAO,SAAW,OAAO,OAAO,CAAC,EAAGA,EAAO,SAAU,CACnD,YAAAC,CAAA,CACD,EAED,MAAM,KAAKD,CAAM,CACnB,CACF,CAEAH,EAAmB,UAAY,qBAC/BA,EAAmB,aAAeD,GCxClC,MAAMM,EAAgB,CAAC,EAAG,EAAG,EAAG,GAAG,EAE7BN,GAAe,CACnB,UAAW,CAAE,KAAM,QAAS,MAAO,KAAM,MAAO,EAAK,EACrD,YAAa,CAAE,KAAM,SAAU,MAAO,CAAC,EAAG,MAAO,EAAK,EACtD,UAAW,CAAE,KAAM,SAAU,MAAO,EAAG,IAAK,CAAE,EAC9C,UAAW,GACX,UAAW,SACX,cAAe,CAAE,KAAM,SAAU,IAAK,EAAG,MAAO,CAAE,EAClD,cAAe,CAAE,KAAM,SAAU,IAAK,EAAG,MAAO,OAAO,gBAAiB,EACxE,YAAa,CAAE,KAAM,SAAU,MAAO,IAAM,IAAK,EAAG,IAAK,CAAE,EAC3D,UAAW,CAAE,KAAM,SAAU,MAAO,IAAK,EAEzC,QAAS,CAAE,KAAM,WAAY,MAAQO,GAAWA,EAAE,IAAK,EACvD,SAAU,CAAE,KAAM,WAAY,MAAOD,CAAc,EACnD,QAAS,CAAE,KAAM,WAAY,MAAO,CAAE,EACtC,SAAU,CAAE,KAAM,WAAY,MAAO,CAAE,EACvC,eAAgB,CAAE,KAAM,WAAY,MAAO,CAAC,EAAG,CAAC,CAAE,EAElD,aAAc,CAAE,KAAM,WAAY,MAAO,IAAK,EAC9C,WAAY,CAAE,KAAM,WAAY,MAAO,IAAK,EAC5C,aAAc,CAAE,KAAM,WAAY,MAAO,IAAK,EAC9C,WAAY,CAAE,KAAM,WAAY,MAAO,IAAK,EAC5C,YAAa,CAAE,KAAM,SAAU,MAAO,CAAE,EAExC,SAAU,CAAE,KAAM,UAAW,MAAO,EAAK,EACzC,YAAa,CAAE,KAAM,WAAY,MAAO,KAAM,QAAS,GAAO,SAAU,EAAK,CAC/E,EAEA,MAAqBE,UAAkBC,EAAM,CAC3C,YAAa,CACX,OAAO,MAAM,WAAW,CAAE,GAAIC,GAAY,GAAIC,GAAY,QAAS,CAACC,GAAWC,EAAO,CAAG,CAAA,CAC3F,CAEA,iBAAkB,CAChB,KAAK,MAAQ,CACX,YAAa,IAAIC,GAAY,KAAK,QAAQ,GAAI,CAC5C,SAAU,KAAK,UAAU,KAAK,IAAI,EAClC,QAAS,KAAK,SAAS,KAAK,IAAI,CAAA,CACjC,CAAA,EAGsB,KAAK,sBAGb,aAAa,CAC5B,mBAAoB,CAClB,KAAM,EACN,SAAU,cACZ,EACA,uBAAwB,CACtB,KAAM,EACN,SAAU,YACZ,EACA,uBAAwB,CACtB,KAAM,EACN,SAAU,cACZ,EACA,qBAAsB,CACpB,KAAM,EACN,SAAU,YACZ,EACA,cAAe,CACb,KAAM,EACN,WAAY,GACZ,SAAU,UACV,aAAc,CAChB,EACA,gBAAiB,CAAE,KAAM,EAAG,SAAU,UAAW,UAAW,KAAK,iBAAkB,EACnF,mBAAoB,CAAE,KAAM,EAAG,SAAU,UAAW,UAAW,KAAK,oBAAqB,EACzF,mBAAoB,CAClB,KAAM,EACN,KAAMC,EAAG,cACT,SAAU,UACV,UAAW,KAAK,oBAClB,EACA,eAAgB,CACd,KAAM,KAAK,MAAM,YAAY,OAC7B,KAAMA,EAAG,cACT,WAAY,GACZ,WAAY,GACZ,SAAU,WACV,aAAcT,CAChB,EACA,eAAgB,CACd,KAAM,EACN,WAAY,GACZ,SAAU,UACZ,EACA,oBAAqB,CACnB,KAAM,EACN,WAAY,GACZ,SAAU,gBACZ,CAAA,CACD,CAEH,CAGA,YAAY,CAAE,SAAAU,EAAU,MAAA9C,EAAO,YAAA+C,GAAoB,OACjD,MAAM,YAAY,CAAE,MAAA/C,EAAO,SAAA8C,EAAU,YAAAC,CAAa,CAAA,EAE5C,MAAAC,EAAmB,KAAK,sBACxB,CAAE,UAAAC,EAAW,YAAAC,EAAa,KAAAC,EAAM,QAAAC,GAAYpD,EAC5C,CAAE,YAAAqD,CAAY,EAAI,KAAK,MAE7BA,EAAY,SAAS,CAAE,YAAarD,EAAM,WAAa,CAAA,EAEvD,IAAIsD,EAAqB,GAiCzB,GAhCkBL,GAAa,KAAK,cAAc,mBAAmB,WAAW,GAI1EH,EAAS,YAAc9C,EAAM,WAC/BqD,EAAY,SAAS,CAAE,UAAAJ,EAAW,YAAa,EAAO,CAAA,EAGpDH,EAAS,cAAgB9C,EAAM,cACrBqD,EAAA,SAAS,CAAE,YAAAH,CAAA,CAAa,EACfI,EAAA,KAIvBD,EAAY,SAAS,CAAE,YAAa,EAAM,CAAA,GAK1CN,EAAY,aACXA,EAAY,wBACVA,EAAY,sBAAsB,KAAOA,EAAY,sBAAsB,WAE9EM,EAAY,SAAS,CAAE,KAAAF,EAAM,QAAAC,CAAS,CAAA,EAGpCE,IACFN,EAAiB,WAAW,iBAAiB,EAC7CA,EAAiB,WAAW,oBAAoB,EAChDA,EAAiB,WAAW,oBAAoB,GAG9CD,EAAY,kBAAmB,CAC3B,KAAA,CAAE,GAAAQ,CAAG,EAAI,KAAK,SACfC,EAAA,KAAA,MAAM,QAAN,MAAAA,EAAa,SAClB,KAAK,MAAM,MAAQ,KAAK,UAAUD,CAAE,EACpCP,EAAiB,cAAc,CACjC,CACF,CAGA,IAAI,UAAW,CACb,OAAO,MAAM,UAAY,KAAK,MAAM,YAAY,QAClD,CAEA,eAAgB,CACd,MAAM,cAAc,EAEf,KAAA,MAAM,YAAY,UACzB,CAEA,KAAK,CAAE,SAAAS,GAAiB,CAChB,KAAA,CACJ,UAAAC,EACA,cAAAC,EACA,cAAAC,EACA,UAAAC,EACA,UAAAC,EACA,YAAAC,EACA,YAAA5B,EACA,UAAA6B,EACA,SAAAC,CAAA,EACE,KAAK,MAEH,CAAE,YAAAZ,CAAY,EAAI,KAAK,MACvB,CAAE,SAAA7C,CAAS,EAAI,KAAK,QAEpB0D,EAAeb,EAAY,aAC7Ba,GACF,KAAK,MAAM,MACR,YAAYT,CAAQ,EACpB,YAAY,CACX,aAAAS,EACA,gBAAiB,CAACA,EAAa,MAAOA,EAAa,MAAM,EACzD,UAAWR,GAAaG,IAAc,SAAWrD,EAAS,eAAiB,GAC3E,cAAAmD,EACA,cAAAC,EACA,UAAAE,EACA,YAAAC,EACA,YAAA5B,EACA,SAAA8B,EACA,iBAAkB,KAAK,kBAAkBD,CAAS,EAClD,gBAAiB,KAAK,qBAAqBA,CAAS,CAAA,CACrD,EACA,KAAK,CAEZ,CAEA,UAAUT,EAAS,CAGX,MAAAY,EAAY,CAAC,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAE,EAEtC,OAAA,IAAIC,GAAMb,EAAI,CACnB,GAAG,KAAK,WAAW,EACnB,GAAI,KAAK,MAAM,GACf,SAAU,IAAIc,GAAS,CACrB,SAAUxB,EAAG,aACb,WAAY,CAGV,UAAW,CACT,KAAM,EACN,MAAO,IAAI,aAAasB,CAAS,CACnC,CACF,CAAA,CACD,EACD,YAAa,EAAA,CACd,CACH,CAEA,WAAY,CACV,KAAK,eAAe,CACtB,CAEA,SAASG,EAAU,CACjB,KAAM,CAAE,YAAAC,CAAgB,EAAA,KAAK,kBAAkB,MAC3CA,EACFA,EAAYD,CAAG,EAEXE,GAAA,MAAMF,EAAI,KAAK,EAAE,CAEzB,CAEA,kBAAkBG,EAAW,CAC3B,MAAMC,EAAO,KAAK,MAAM,YAAY,eAAeD,CAAI,EACvD,MAAO,CAACC,EAAK,MAAQ,EAAIA,EAAK,SAAW,EAAGA,EAAK,OAAS,EAAIA,EAAK,SAAW,CAAC,CACjF,CAEA,qBAAqBD,EAAW,CAEvB,OADS,KAAK,MAAM,YAAY,eAAeA,CAAI,EAC3C,KAAO,EAAI,CAC5B,CAEA,qBAAqBA,EAAW,CAC9B,MAAMC,EAAO,KAAK,MAAM,YAAY,eAAeD,CAAI,EACvD,MAAO,CAACC,EAAK,GAAK,EAAGA,EAAK,GAAK,EAAGA,EAAK,OAAS,EAAGA,EAAK,QAAU,CAAC,CACrE,CACF,CAEApC,EAAU,UAAY,gBACtBA,EAAU,aAAeR,GCvRzB,MAAMA,GAAe,CACnB,YAAa,CAAE,KAAM,SAAU,MAAO,EAAG,IAAK,CAAE,EAChD,aAAc,CAAE,KAAM,WAAY,MAAO,IAAK,EAC9C,WAAY,CAAE,KAAM,WAAY,MAAO,IAAK,EAC5C,WAAY,CAAE,KAAM,SAAU,MAAO,CAAE,CACzC,EAEA,MAAqB6C,UAAuBC,EAAU,CACpD,YAAa,CACL,MAAA3C,EAAU,MAAM,aACtB,OAAAA,EAAQ,OAAS,CAEf,WAAY;AAAA;AAAA;AAAA;AAAA;AAAA,QAOZ,iBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAYlB,WAAY;AAAA;AAAA;AAAA,QAKZ,iBAAkB;AAAA,QAIlB,yBAA0B;AAAA,OAAA,EAIrBA,CACT,CAEA,gBAAgBC,EAAa,CAC3B,MAAM,gBAAgBA,CAAM,EAEH,KAAK,sBACb,aAAa,CAC5B,UAAW,CAAE,KAAM,EAAG,SAAU,cAAe,EAC/C,QAAS,CAAE,KAAM,EAAG,SAAU,YAAa,CAAA,CAC5C,CACH,CAEA,KAAKA,EAAa,CAChB,KAAM,CAAE,YAAAC,EAAa,WAAA0C,GAAe,KAAK,MAEzC3C,EAAO,SAAW,OAAO,OAAO,CAAC,EAAGA,EAAO,SAAU,CACnD,YAAAC,EACA,WAAA0C,CAAA,CACD,EAED,MAAM,KAAK3C,CAAM,CACnB,CACF,CAEAyC,EAAe,UAAY,iBAC3BA,EAAe,aAAe7C,GC5D9B,MAAMgD,GAAW,IAEXC,GAAe,CACnB,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAG,MAAO,IAAK,OAAQ,IAAK,KAAM,EAAK,EAC1D,KAAM,CAAE,EAAG,IAAK,EAAG,EAAG,MAAO,IAAK,OAAQ,IAAK,KAAM,EAAK,EAC1D,QAAS,CAAE,EAAG,IAAK,EAAG,IAAK,MAAO,IAAK,OAAQ,IAAK,KAAM,EAAK,EAC/D,QAAS,CAAE,EAAG,EAAG,EAAG,IAAK,MAAO,IAAK,OAAQ,IAAK,KAAM,EAAM,CAChE,EAEMC,GAAe,IAAIC,GAAa,CACpC,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,UAAW,CACb,CAAC,EAEKC,GAAa,IAAInF,GAAW,CAChC,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,UAAW,EACX,SAAU,CAAC,OAAQ,KAAM,GAAI,CAC/B,CAAC,EAEKoF,GAAiB,IAAIC,GAAe,CAAE,aAAAJ,GAAc,WAAAE,EAAY,CAAA,EAEhEG,GAAgB,CACpB,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,YAAa,CAAC,IAAK,IAAK,EAAE,EAC1B,YAAa,CAAC,GAAI,IAAK,GAAG,EAC1B,QAAS,CAACF,EAAc,CAC1B,EAEMG,EAAc,CAClB,KAAM,EACN,MAAO,EACP,MAAO,EACP,IAAK,EACL,IAAK,EACL,IAAK,EACL,QAAS,CACX,EAEA,SAAwBzE,GAAUb,EAa/B,CACK,KAAA,CACJ,eAAAuF,EACA,MAAAC,EACA,OAAAC,EACA,YAAAC,EACA,mBAAAC,EACA,OAAAC,EACA,KAAAC,EACA,cAAAC,EACA,cAAAC,EACA,QAAAC,EACA,OAAAC,CACE,EAAAjG,EAEEkG,EAAQb,GAGR,CAACc,EAAWC,CAAY,EAAIC,EAAA,SAChCT,EACK,CACC,OAAQ,CAAC,GAAI,EAAE,EACf,UAAWA,EAAO,CAAC,EACnB,SAAUA,EAAO,CAAC,EAClB,MAAO,EACP,QAAS,EACT,KAAM,EAAA,EAER,OAAO,OAAO,CAAA,EAAIU,EAAY,MAAM,SAAS,CAAA,EAIhCC,EAAAN,CAAM,EAAI,IAAM,CACpBG,EAAAE,EAAY,MAAM,SAAS,CAAA,EAG1C,MAAME,EAAW,EACX,CAACC,EAAWC,CAAY,EAAIL,EAAA,SAAS,CAAS,CAAA,EAE9CM,EAAc,CAAA,EAEpB,SAASC,GAAc,CACrB,QAAQ,IAAIH,CAAS,EAEhBA,EAAU,OAGLT,EAAAS,EAAU,OAAO,CAAC,EAF1BT,EAAQ,IAAI,CAIhB,CAEA,SAASa,EAAc,CAAE,UAAAJ,GAAkB,CACzC,KAAM,CAAE,OAAAK,EAAQ,EAAAzE,EAAG,EAAA0E,CAAA,EAAMN,EAEzB,GAAI,CAACK,EACI,OAAA,KAGH,MAAAE,EAAYlB,EAAcgB,EAAO,CAAC,EAGtC,OAAA/F,EAAA,cAAC,MAAA,CACC,UAAU,UACV,MAAO,CACL,SAAU,SACV,gBAAiB,YACjB,WAAY,kBACZ,UAAW,iCACX,MAAO,OACP,QAAS,YACT,SAAU,WACV,KAAMsB,EAAI,GACV,IAAK0E,EAAI,EACX,CAAA,EAEChG,EAAA,cAAA,MAAA,KACEA,EAAA,cAAA,IAAA,KAAGiG,CAAU,CAChB,EACCjG,EAAA,cAAA,MAAA,KAAI,eAAa+F,EAAO,IAAI,GAAC,CAAA,CAGpC,CAEA,OAAInB,EAAmB,QACdgB,EAAA,KAEL,IAAIhC,EAAe,CACjB,GAAI,SACJ,KAAMc,EACN,YAAaF,EACb,kBAAoB0B,GAAWA,EAAE,GACjC,kBAAoBA,GAAWA,EAAE,GACjC,aAAeA,GAAWA,EAAE,GAC5B,WAAaA,GAAWA,EAAE,GAC1B,SAAWA,GAAWjH,EAAM,OAAOiH,EAAE,GAAG,EACxC,SAAU,EACV,QAAS,GACT,eAAgB,EAChB,QAAS,GACT,cAAe,GACf,WAAYlB,EAAgB,EAAM,EAClC,SAAU,GACV,cAAe,GACf,eAAgB,CAAC,IAAK,EAAG,GAAG,EAC5B,QAASW,CAAA,CACV,CAAA,EAGDf,EAAmB,UACdgB,EAAA,KAEL,IAAIO,EAAiB,CACnB,GAAI,WACJ,KAAM1B,EACN,aAAeyB,GAAWA,EAAE,GAC5B,WAAaA,GAAWA,EAAE,GAC1B,aAAeA,GAAWA,EAAE,GAC5B,WAAaA,GAAWA,EAAE,GAC1B,QAAUA,GAAW,UACrB,SAAWA,GAAWjH,EAAM,OAAOiH,EAAE,GAAG,EACxC,WAAY,UACZ,UAAW,UACX,QAASlB,EAAgB,GAAK,GAC9B,QAAS,EACT,YAAaR,EACb,cAAe,GACf,QAAS,GACT,UAAW,GAAGT,EAAQ,kBACtB,YAAaC,GACb,UAAW,GACX,UAAW,GACX,SAAU,GACV,UAAW,GACX,cAAe,GACf,eAAgB,CAAC,IAAK,EAAG,GAAG,EAC5B,QAAS2B,EACT,WAAY,CACV,UAAW,EACb,CAAA,CACD,CAAA,EAGDf,EAAmB,UACdgB,EAAA,KAEL,IAAIQ,EAAgB,CAClB,GAAI,eACJ,KAAMzB,EACN,YAAaH,EACb,kBAAoB0B,GAAW,CAACA,EAAE3B,EAAY,KAAK,EAAG2B,EAAE3B,EAAY,KAAK,CAAC,EAC1E,kBAAoB2B,GAAW,CAACA,EAAE3B,EAAY,GAAG,EAAG2B,EAAE3B,EAAY,GAAG,CAAC,EACtE,aAAe2B,GAAWA,EAAE3B,EAAY,IAAI,EAC5C,WAAa2B,GAAWA,EAAE3B,EAAY,OAAO,EAC7C,eAAgB,CAAC,IAAK,EAAG,GAAG,EAC5B,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,SAAUkB,EACV,QAAS,GACT,WAAYT,EAAgB,EAAM,CAAA,CACnC,CAAA,EAIHhF,EAAA,cAACqG,EAAA,CACC,OAAAT,EACA,QAAST,EAAM,QACf,cAAe,EACf,UAAAC,EACA,WAAY,GACZ,UAAW,IAAM,UACjB,QAASS,EACT,kBAAoBS,GAAW,CACjBf,EAAA,OAAO,eAAgBe,EAAE,SAAS,CAChD,CAAA,kBAKGC,EAAU,CAAA,SAAUhB,EAAY,QAAQ,SAAU,qBAAsBiB,EAAc,EAExFV,EAAc,CAAE,UAAAJ,EAAW,CAAA,CAGlC,CC/KA,MAAA9E,GAAA,CACA,SAAA,CACA,GAAA,CACA,SAAA,eACA,WAAA,aACA,OAAA,SACA,SAAA,YACA,SAAA,WACA,OAAA,SACA,MAAA,OACA,EACA,GAAA,CACA,SAAA,eACA,WAAA,aACA,OAAA,QACA,SAAA,kBACA,SAAA,gBACA,OAAA,aACA,MAAA,iBACA,CACA,CACA,EAkCA6F,GAAAtG,EAAA,CACA,KAAA,yBACA,KAAAS,GACA,WAAA,CACA,iBAAA8F,EACA,cAAAC,GAAA,aACAC,GAAA,QACAC,GACA,iBAAAC,GAAA,aACAhG,EAAA,aACA,YAAAiG,CACA,EACA,MAAA,CACA,KAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,UAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,WAAA,OACA,UAAA,OACA,EACA,KAAA,IAAA,CACA,MAAAC,EAAA,CACA,EAAA,CAAA,IAAA,IAAA,GAAA,EACA,EAAA,CAAA,GAAA,IAAA,EAAA,EACA,EAAA,CAAA,IAAA,IAAA,EAAA,EACA,EAAA,CAAA,IAAA,IAAA,EAAA,EACA,EAAA,CAAA,IAAA,GAAA,EAAA,CAAA,EAGAC,EAAA,CACA,SAAA,GACA,OAAA,GACA,SAAA,EAAA,EAGA,MAAA,CACA,OAAA,KAAA,MAAA,KAAA,KAAA,QAAA,EACA,gBAAAD,EACA,SAAAC,EACA,YAAA,OAAA,KAAAD,CAAA,EAAA,IAAAE,IACA,CACA,KAAAC,EAAA,KACA,MAAAH,EAAAE,CAAA,EACA,MAAAA,EACA,MAAAA,CAAA,EAEA,EAEA,eAAA,CAAA,CAAA,KAAAC,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,GAAA,EAAA,MAAA,EAAA,MAAA,GAAA,EAEA,WAAA,CACA,QAAA,GACA,SAAA,GACA,WAAA,GACA,MAAA,GACA,YAAA,GACA,UAAA,GACA,OAAA,CAAA,KAAA,IAAA,EACA,KAAA,GACA,iBAAA,GACA,MAAA,EACA,EAEA,QAAA,CACA,cAAA,GACA,MAAA,QACA,YAAAC,EAAA,SACA,UAAA,GACA,cAAA,GACA,UAAA,GACA,WAAA,GACA,UAAA,GACA,KAAA,CAAA,CACA,EAEA,UAAA,EACA,QAAA,MAEA,OAAAC,EAAA,EAAA,EACA,WAAA,CAAA,EACA,SAAA,CAAA,EACA,aAAA,CAAA,EAEA,MAAAA,EAAA,EAAA,EACA,UAAA,CAAA,EACA,QAAA,CAAA,EACA,YAAA,CAAA,EAEA,SAAAA,EAAA,EAAA,EACA,aAAA,CAAA,EACA,WAAA,CAAA,EACA,eAAA,CAAA,EAEA,eAAA,EAAA,KAEA,0BAAA,EAEA,WAAA,GACA,cAAA,GAEA,YAAA9B,EAAA,MACA,WAAAA,EAAA,MAAA,WACA,SAAA,GACA,SAAA,GAEA,WAAA,CAAA,IAAA,IAAA,GAAA,GAAA,GAAA,IAAA,KAAA,EAAA,IAAA,GAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EACA,MAAA,GAEA,WAAA,CAAA,EACA,WAAA,GACA,aAAA,yCAEA,cAAA,CAAA,EACA,oBAAA,CAAA,EACA,oBAAA,EAAA,CAEA,EACA,SAAA,CACA,SAAA,CACA,OAAA,IAAA+B,GAAA,KAAA,WAAA/B,CAAA,CACA,EAEA,YAAA,CACA,MAAAgC,EAAA,KAAA,OAAA,MAAA,YAAA,OACAC,GAAAA,EAAA,OAAA,KAAA,IAAA,EAEA,GAAAD,EAAA,SAAA,EACA,cAAA,IAAA,iBAAA,EACA,MAEA,OAAAA,EAAA,CAAA,CACA,EAEA,cAAA,CACA,OAAA,KAAA,YACA,EACA,WAAA,CACA,MAAAE,EAAA,CACA,KAAA,UACA,GAAA,WAAA,EAGAC,EAAA,CACA,KAAA,QACA,GAAA,WAAA,EAGA,OAAA,KAAA,QAAA,cAAAN,EAAA,SAAAM,EAAAD,CACA,CACA,EACA,MAAA,CACA,0BAAA,CACA,KAAA,WAAA,kBAEAjC,EAAA,KAAA,MAAA,GACAA,EAAA,KAAA,MAAA,GACA,EAEA,KAAA,4BAAA,CACA,QAAA,IAAA,uBAAA,EACA,KAAA,YAAA,KAAA,kBAAA,EACA,MAAA,KAAA,eACA,EAEA,2BAAA,CACA,KAAA,WAAA,KAAA,YAAA,cAAA4B,EAAA,SACA,KAAA,mBAAA,CACA,EAEA,YAAA,iBACA,MAAAO,EAAA,KAAA,oBAAA,KAAA,UAAA,EACAA,EAAA,IACA,QAAA,IAAA,UAAAA,CAAA,GACAlF,EAAA,KAAA,cAAA,MAAAA,EAAA,YAAAkF,IACAC,EAAA,KAAA,eAAA,MAAAA,EAAA,YAAAD,IACAE,EAAA,KAAA,iBAAA,MAAAA,EAAA,YAAAF,GACA,KAAA,aAAA,YACA,KAAA,WAAA,YACA,KAAA,cAAA,KAEA,QAAA,IAAA,MAAA,GACAG,EAAA,KAAA,cAAA,MAAAA,EAAA,aACAC,EAAA,KAAA,eAAA,MAAAA,EAAA,aACAC,EAAA,KAAA,iBAAA,MAAAA,EAAA,YACA,KAAA,cAAA,IAEA,KAAA,qBAAA,CACA,CACA,EACA,QAAA,CACA,MAAA,oBAAAC,EAAA,CACA,QAAA,IAAAA,CAAA,EACA,KAAA,SAAAA,CAAA,EAAA,CAAA,KAAA,SAAAA,CAAA,EACA,KAAA,qBAAA,EACA,KAAA,gBAAA,CACA,EAGA,mBAAA,CACA,MAAA9G,EAAA,KAAA,OAAA,OACA,GAAA,CAAAA,EAAA,SAAA,CAAAA,EAAA,UAAA,CACA,QAAA,IAAA,mCAAA,EACA,MACA,CAGA,MAAA+G,EAAA,EAAA/G,EAAA,UAAA,YAAA,GAAA,EACAgH,EAAAhH,EAAA,UAAA,UAAA,EAAA+G,CAAA,EACAE,EAAAjH,EAAA,UAAA,UAAA+G,CAAA,EAEA,KAAA,QAAA,UAAAC,EACA,KAAA,QAAA,WAAAC,CACA,EAEA,MAAA,eAAA,CAEA,GAAA,CAEA,MAAAC,EACA,KAAA,QAAA,WAAA,QAAA,GAAA,EAAA,GACA,KAAA,QAAA,WACA,KAAA,QAAA,UAAA,IAAA,KAAA,QAAA,WAEAC,EAAA,MAAA,KAAA,QAAA,YAAAD,CAAA,EACA,KAAA,WAAAE,EAAA,MAAAD,CAAA,QACAE,EAAA,CACA,QAAA,IAAA,QAAA,EACA,MAAAlC,EAAAkC,EAEA,KAAA,WAAA,cAAAlC,EAAA,SAAA,KACAf,EAAA,OAAA,eAAA,KAAA,WAAA,IAAA,CAEA,CAGA,KAAA,WAAA,OAAA,KAAA,OAAA,OAAA,WAAA,KAAA,WAAA,KAAA,EAEA,KAAA,WAAA,QACA,KAAA,OAAA,OAAA,eAAA,CACA,UAAA,KAAA,WAAA,OAAA,CAAA,EACA,SAAA,KAAA,WAAA,OAAA,CAAA,EACA,KAAA,KAAA,WAAA,MAAA,GACA,MAAA,GACA,QAAA,CAAA,CACA,EAIA,MAAAkD,EAAA,KAAA,WAAA,MAAA,KAAA,WAAA,MAAA,kBACA,KAAA,MAAA,QAAAA,CAAA,EAEA,KAAA,eAAA,CACA,EAEA,MAAA,gBAAA,CACA,GAAA,KAAA,WAAA,KAAA,WAAA,UACA,GAAA,CACA,MAAAC,EAAA,MAAA,KAAA,QAAA,YACA,KAAA,QAAA,UAAA,IAAA,KAAA,WAAA,SAAA,EAEAC,EAAA,MAAAC,EAAA,YAAAF,CAAA,EACAG,EAAAC,EAAAH,CAAA,EACAE,IACA,KAAA,aAAA,sDAAAA,CAAA,WACAvC,EAAA,CACA,QAAA,MAAAA,CAAA,CACA,CAEA,EAEA,YAAAqB,EAAA,CAEA,GAAAA,IAAA,KAAA,CACA,KAAA,WAAA,GACA,MACA,CAEA,MAAAoB,EAAA,KAAA,cAAApB,CAAA,EACA,QAAA,IAAAoB,CAAA,EAGA,KAAA,aAAAA,EAAA,KAAA,WAAA,GACA,KAAA,WAAAA,CACA,EAEA,oBAAA,CAWA,EAEA,cAAA,CACA,MAAAC,EAAA,KAAA,MAAA,KAAA,eAAA,IAAA,EACAC,EAAA,KAAA,MAAA,KAAA,eAAA,EAAA,EAAA,GACA,KAAA,QAAA,MAAA,GAAAD,EAAA,GAAA,IAAA,EAAA,GAAAA,CAAA,GAAAC,EAAA,GAAA,KAAA,GAAA,GAAAA,CAAA,EACA,EAEA,QAAA3I,EAAA,CACA,KAAA,eAAAA,EACA,KAAA,aAAA,EAGA,KAAA,YAAA,KAAA,WAAA,KAAA,eACA,KAAA,UAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,QAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,EAGA,KAAA,gBACA,KAAA,WAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,SAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,EACA,KAAA,aAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,WAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,IAKA,KAAA,SAAA,MAAA,KAAA,MAAA,YAAA,EAEA,KAAA,SAAA,OAAA,KAAA,OAAA,YAAA,EAEA,KAAA,SAAA,YAAA,KAAA,SAAA,YAAA,CACA,EAEA,kBAAA,CACA,KAAA,QAAA,UAAA,CAAA,KAAA,QAAA,UACA,KAAA,0BAAA,KAAA,MAKA,KAAA,QAAA,WAAA,KAAA,QAAA,IAAA,KAAA,MAAA,GAGA,KAAA,QAAA,WAAA,KAAA,QAAA,CACA,EAEA,MAAA,iBAAA4I,EAAA,CACA,GAAA,KAAA,cAAA,OACA,UAAAC,KAAAD,EACA,GAAA,CACAC,EAAA,CAAA,EAAA,KAAA,oBAAAA,EAAA,CAAA,CAAA,OACA,CAAA,CAIA,OAAA9B,EAAA6B,CAAA,CACA,EAEA,MAAA,cAAAE,EAAA,CACA,MAAAC,EAAA,CAAA,EACA,IAAAC,EAAA,GAEA,UAAAC,KAAAH,EAAA,CACA,MAAAI,EAAAD,EAAA,KACAE,EAAAF,EAAA,WACAG,EAAAH,EAAA,WAGAD,IACA,KAAA,cAAAA,CAAA,EAAAC,EAAA,GACA,KAAA,oBAAAA,EAAA,EAAA,EAAAD,EAEA,QAAAK,EAAA,EAAAA,EAAAJ,EAAA,KAAA,OAAA,EAAAI,IAAA,CACA,MAAAJ,EAAA,CACA,GAAAE,EAAAE,CAAA,EACA,GAAAF,EAAAE,EAAA,CAAA,EACA,GAAAH,EAAAG,CAAA,EACA,GAAAH,EAAAG,EAAA,CAAA,EACA,EAAAL,EACA,IAAAI,EAAAC,CAAA,CAAA,EAGAJ,EAAA,GAAA,CAAA,GAAAA,EAAA,GAAA,CAAA,GAAAA,EAAA,GAAA,CAAA,GAAAA,EAAA,GAAA,CAAA,IAAAA,EAAA,IAAA,GAEAF,EAAA,KAAAE,CAAA,CACA,CACA,CACA,OAAAlC,EAAAgC,CAAA,CACA,EAEA,iBAAA,CACA,UAAA,KAAA,OAAA,QACA,QAAA,IAAA,eAAA,EACA,KAAA,WAAA,GACA,KAAA,OAAA,OAAA,iBAAA,EAAA,EACA,KAAA,OAAA,OAAA,eAAA,EAAA,EAEA,EAEA,sBAAA,CAEA,CAAA,KAAA,YAAA,CAAA,KAAA,WAAA,CAAA,KAAA,eAGA,KAAA,SAAA,SACA,KAAA,eACA,KAAA,WAAA,YACA,KAAA,SAAA,cAEA,KAAA,WAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,SAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,GAGA,KAAA,SAAA,OAAA,KAAA,OAAA,YAAA,GAGA,KAAA,SAAA,WACA,KAAA,UAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,QAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,EAEA,KAAA,SAAA,MAAA,KAAA,MAAA,YAAA,GAGA,KAAA,SAAA,WACA,KAAA,eACA,KAAA,aAAA,YACA,KAAA,WAAA,cAEA,KAAA,aAAA,OAAA,CAAA,EAAA,KAAA,cAAA,CAAA,EACA,KAAA,WAAA,OAAA,CAAA,KAAA,eAAA,GAAA,CAAA,GAGA,KAAA,SAAA,YAAA,KAAA,SAAA,YAAA,GAEA,EAEA,SAAA,CACA,GAAA,KAAA,QAAA,UAAA,CACA,MAAAO,EAAA,KAAA,IAAA,EAAA,KAAA,0BACA,KAAA,2BAAAA,EACA,KAAA,gBAAAA,EAAA,KAAA,MAAA,IAEA,KAAA,qBAAA,EACA,KAAA,aAAA,EACA,OAAA,sBAAA,KAAA,OAAA,CACA,CACA,EAEA,wBAAA,CACA,KAAA,qBAAA,CAAA,SAAA,QACA,QAAA,IAAA,WAAA,EACA,KAAA,oBAAA,GACA,KAAA,iBAAA,GACA,KAAA,QAAA,WAAA,SAAA,SACA,QAAA,IAAA,SAAA,EACA,KAAA,oBAAA,GACA,KAAA,iBAAA,EAEA,EAGA,MAAA,iBAAAR,EAAA,CAEA,IAAAE,EAAA,GAEA,MAAA5E,EAAA,CAAA,EAEA,UAAAmF,KAAAT,EAAA,CACAE,IAEA,IAAAQ,EAAAD,EAAA,WAAA,CAAA,EACAE,EAAAF,EAAA,WAAA,CAAA,EAEAG,EAAA,CAAA,EAEA,QAAAL,EAAA,EAAAA,EAAAE,EAAA,KAAA,OAAAF,IACAI,EAAAF,EAAA,WAAAF,CAAA,EAIAE,EAAA,KAAAF,CAAA,EAAA,CAAA,IAAAE,EAAA,KAAAF,EAAA,CAAA,EAAA,CAAA,GACAE,EAAA,KAAAF,CAAA,EAAA,CAAA,IAAAE,EAAA,KAAAF,EAAA,CAAA,EAAA,CAAA,GAEAK,EAAA,QAAAC,GAAA,CACAA,EAAA,GAAAJ,EAAA,WAAAF,EAAA,CAAA,CAAA,CACA,EAEAjF,EAAA,KAAA,GAAAsF,CAAA,EAEAA,EAAA,CAAA,EACAF,EAAAC,GAEAC,EAAA,KAAA,CACA,GAAAF,EACA,GAAAD,EAAA,KAAAF,EAAA,CAAA,EACA,GAAAE,EAAA,KAAAF,CAAA,EACA,EAAAL,EACA,IAAAO,EAAA,WAAAF,EAAA,CAAA,CAAA,CACA,EAKAK,EAAA,QAAAC,GAAA,CACAA,EAAA,GAAAF,CAAA,CACA,EACArF,EAAA,KAAA,GAAAsF,CAAA,CACA,CAEA,OAAA3C,EAAA3C,CAAA,CACA,EAEA,MAAA,WAAA,CACA,IAAA0E,EAAA,CAAA,EACAzE,EAAA,CAAA,EAEA,GAAA,CACA,GAAA,KAAA,WAAA,SAAA,SAAA,MAAA,EAAA,CACA,MAAAuF,EAAA,MAAA,KAAA,QAAA,YACA,KAAA,QAAA,UAAA,IAAA,KAAA,WAAA,QAAA,EAEAd,EAAAc,EAAA,MACAvF,EAAAuF,EAAA,WAAA,SACA,KAAA,WAAA,SAAA,SAAA,IAAA,EAAA,CAIA,MAAAvB,EAAA,MAHA,MAAA,KAAA,QAAA,YACA,KAAA,QAAA,UAAA,IAAA,KAAA,WAAA,QAAA,GAEA,cAEAwB,EAAAC,EAAAzB,CAAA,EACAL,EAAA,IAAA,YAAA,OAAA,EAAA,OAAA6B,CAAA,EACAD,EAAA,KAAA,MAAA5B,CAAA,EACAc,EAAAc,EAAA,MACAvF,EAAAuF,EAAA,WACA,QACA5D,EAAA,CACA,QAAA,MAAAA,CAAA,EACA,KAAA,QAAA,cAAA,GAAAA,CACA,CACA,MAAA,CAAA,MAAA8C,EAAA,YAAAzE,EACA,EAEA,aAAA0F,EAAA,CACA,KAAA,SAAAA,CACA,EAEA,cAAA,CACA,KAAA,QAAA,YACA,KAAA,QAAA,cAAAjD,EAAA,SACAA,EAAA,UACAA,EAAA,SACA,aAAA,QAAA,qCAAA,KAAA,QAAA,WAAA,CACA,CACA,EAEA,MAAA,SAAA,CAYA,GAXA7B,EAAA,OAAA,gBAAA,CAAA,KAAA,SAAA,EAEA,KAAA,QAAA,UAAA,KAAA,UACA,KAAA,QAAA,WAAA,KAAA,YAAA,GACA,KAAA,QAAA,UAAA,KAAA,UAGA,KAAA,gBAAA,EAEA,MAAA,KAAA,gBAEA,KAAA,UAAA,OAEA,KAAA,SAAA,GACA,KAAA,mBAAA,EAEA,KAAA,aAAA,EAEA,KAAA,QAAA,cAAA,qBACA,QAAA,IAAA,eAAA,EACA,KAAA,CAAA,MAAA6D,EAAA,YAAAzE,CAAA,EAAA,MAAA,KAAA,UAAA,EAEA,QAAA,IAAA,wBAAA,EACA,KAAA,QAAA,cAAA,GAAA,KAAA,GAAA,UAAA,CAAA,MACA,KAAA,MAAA,MAAA,KAAA,cAAAyE,CAAA,EACA,KAAA,UAAA,KAAA,MAAA,UAAAlD,GAAAA,EAAA,EAAA,EACA,KAAA,QAAA,KAAA,MAAA,UAAAA,GAAAA,EAAA,EAAA,EACA,KAAA,YAAA,KAAA,MAAA,UAAAA,GAAAA,EAAA,CAAA,EAEA,QAAA,IAAA,WAAA,EACA,KAAA,QAAA,cAAA,GAAA,KAAA,GAAA,QAAA,CAAA,MACA,KAAA,OAAA,MAAA,KAAA,iBAAAkD,CAAA,EACA,KAAA,WAAA,KAAA,OAAA,UAAAlD,GAAAA,EAAA,EAAA,EACA,KAAA,SAAA,KAAA,OAAA,UAAAA,GAAAA,EAAA,EAAA,EACA,KAAA,aAAA,KAAA,OAAA,UAAAA,GAAAA,EAAA,CAAA,EAEA,QAAA,IAAA,aAAA,EACA,KAAA,QAAA,cAAA,GAAA,KAAA,GAAA,UAAA,CAAA,MACA,KAAA,SAAA,MAAA,KAAA,iBAAAvB,CAAA,EACA,KAAA,aAAA,KAAA,SAAA,UAAAuB,GAAAA,EAAA,CAAA,CAAA,EACA,KAAA,WAAA,KAAA,SAAA,UAAAA,GAAAA,EAAA,CAAA,CAAA,EACA,KAAA,eAAA,KAAA,SAAA,UAAAA,GAAAA,EAAA,CAAA,CAAA,EAEA,QAAA,IAAA,KAAA,EACA,KAAA,QAAA,cAAA,GAEA,SAAA,iBAAA,mBAAA,KAAA,uBAAA,EAAA,EAEA,KAAA,QAAA,UAAA,GACA,KAAA,0BAAA,KAAA,MACA,KAAA,QAAA,CACA,EAEA,eAAA,CACA,SAAA,oBAAA,mBAAA,KAAA,sBAAA,EACAX,EAAA,OAAA,gBAAA,EAAA,EACA,KAAA,OAAA,OAAA,gBAAA,EAAA,EACA,KAAA,QAAA,UAAA,EACA,CACA,CAAA","x_google_ignoreList":[0]}